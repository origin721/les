# –ü–ª–∞–Ω —Ä–∞–±–æ—Ç—ã —Å IndexedDB

## üéØ –ó–∞–¥–∞—á–∏ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

### ‚úÖ 1. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - –¥–∏–∞–≥—Ä–∞–º–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ - –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª:** `front/docs/indexdb/getting-started.md`
- **–ß—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏:** –í—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏–∞–≥—Ä–∞–º–º—É –ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏ (400-1050ms)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–Ω–∏–º–∞—é—Ç —ç—Ç–∞–ø—ã –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### ‚úÖ 2. –ê–Ω–∞–ª–∏–∑ rooms - —Å–≤—è–∑—å —Å accounts - –ó–ê–í–ï–†–®–ï–ù–û
- **–†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞:**
  - Rooms —É–∂–µ –∏–º–µ—é—Ç –≤–µ—Ä—Å–∏—é (ROOMS_VERSION = 1) ‚úÖ
  - –î–æ–±–∞–≤–∏–ª–∏ roomIds –∫ accounts —Å –≤–µ—Ä—Å–∏–µ–π 2 ‚úÖ
- **–°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è:** `4_accounts_room_ids.ts`
- **–û–±–Ω–æ–≤–ª–µ–Ω–æ:** ACCOUNTS_VERSION = 2

### ‚úÖ 3. –î–æ—Ä–∞–±–æ—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã –º–∏–≥—Ä–∞—Ü–∏–π - –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è - –ó–ê–í–ï–†–®–ï–ù–û
- **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤ `db_state_manager.ts`
    - `startMigrationTimer()` - –∑–∞–ø–∏—Å—å –Ω–∞—á–∞–ª–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
    - `endMigrationTimer()` - –∑–∞–ø–∏—Å—å –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏ —Ä–∞—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏
    - `recordMigrationStep()` - –∑–∞–ø–∏—Å—å –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤
    - `getMigrationStats()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–ª—è UI
  - ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ `migrations.ts` - –∑–∞–º–µ—Ä—è–µ—Ç—Å—è –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `/settings` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    - –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∫–∞–∂–¥–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ (—Å—Ö–µ–º–∞/–¥–∞–Ω–Ω—ã–µ)
    - –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–∏–≥—Ä–∞—Ü–∏–∏
  - ‚úÖ CSS —Å—Ç–∏–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ `themes.css`
    - –£–±—Ä–∞–Ω–∞ –ª–∏—à–Ω—è—è –∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞
    - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `--les-*` –∏–∑ —Ç–µ–º–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

### ‚úÖ 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ CSS race condition –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —á–∞—Ç–æ–≤ - –ó–ê–í–ï–†–®–ï–ù–û
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ 1650x1422 —Å—Ç–∏–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/les/chat-rooms`
- **–ü—Ä–∏—á–∏–Ω–∞:** CSS –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `--background-color` –±–µ–∑ fallback –∑–Ω–∞—á–µ–Ω–∏—è –≤ `.chatPage`
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
  - –ó–∞–º–µ–Ω–µ–Ω–∞ `var(--background-color)` –Ω–∞ `var(--les-bg-primary, #0a0a0a)`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã fallback –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
  - –£–ª—É—á—à–µ–Ω—ã –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ç–∏–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö

### 5. üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ - –ù–ï –ù–ê–ß–ê–¢–û
- **–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏ `4_accounts_room_ids.ts`
- **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
  - –ù–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏)
  - roomIds –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º
  - –í–µ—Ä—Å–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å 1 –¥–æ 2

## üìã –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
1. ‚úÖ –î–∏–∞–≥—Ä–∞–º–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏
2. ‚úÖ –ê–Ω–∞–ª–∏–∑ –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞ rooms/accounts —Å–≤—è–∑–∏
3. ‚úÖ –í—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–π (–ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ)
4. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ CSS race condition
5. üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 4/5 –∑–∞–¥–∞—á
- **–°–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ `4_accounts_room_ids.ts`
- **–ì–æ—Ç–æ–≤–æ:**
  - –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏–π –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  - CSS –ø—Ä–æ–±–ª–µ–º–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —á–∞—Ç–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ - —Ç–µ–ø–µ—Ä—å —Å—Ç–∏–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞ –≤—Å–µ—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:

#### 0. `front/src/pages/chat_room/ui/ChatRoomsPage.module.css` (–ù–û–í–û–ï)
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ CSS race condition –ø—Ä–æ–±–ª–µ–º–∞:**
  - –ó–∞–º–µ–Ω–µ–Ω–∞ `background-color: var(--background-color)` –Ω–∞ `background-color: var(--les-bg-primary, #0a0a0a)`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã fallback –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª–µ
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CSS (–¥–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏)
  - –î–æ–±–∞–≤–ª–µ–Ω –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å –¥–ª—è –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ (`@media (min-width: 1200px)`)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/les/chat-rooms` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏

#### 1. `front/src/indexdb/db_state_manager_v1/db_state_manager.ts`
- **–î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏:**
  - `startMigrationTimer(dbName, fromVersion, toVersion)` - –∑–∞–ø–∏—Å—å –Ω–∞—á–∞–ª–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
  - `endMigrationTimer(dbName)` - —Ä–∞—Å—á–µ—Ç –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  - `recordMigrationStep(dbName, stepInfo)` - –∑–∞–ø–∏—Å—å –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤
  - `getMigrationStats(dbName)` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–ª—è UI
- **–ù–æ–≤—ã–µ –ø–æ–ª—è –≤ DbStateRecord:**
  - `migrationStartTime?: number` - –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
  - `migrationEndTime?: number` - –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
  - `migrationDurationMs?: number` - –æ–±—â–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
  - `executedMigrations?: Array<{...}>` - –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —à–∞–≥–∞–º

#### 2. `front/src/indexdb/main_les_store_v1/migrations/migrations.ts`
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–º–µ—Ä–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
  - `runSchemaMigrations()` - –∑–∞–º–µ—Ä—è–µ—Ç—Å—è –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã
  - `runDataMigrations()` - –∑–∞–º–µ—Ä—è–µ—Ç—Å—è –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
  - –í—ã–∑–æ–≤—ã `startMigrationTimer()` –∏ `endMigrationTimer()`
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `recordMigrationStep()` –¥–ª—è –∫–∞–∂–¥–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

#### 3. `front/src/pages/settings/ui/SettingsScreen.svelte`
- **–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è "‚è±Ô∏è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π":**
  - –ù–æ–≤—ã–π state: `migrationStats`, `migrationStatsLoading`, `showMigrationStats`
  - –§—É–Ω–∫—Ü–∏—è `handleMigrationStatsCheck()` - –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  - –§—É–Ω–∫—Ü–∏—è `formatDuration(ms)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
  - –ö–Ω–æ–ø–∫–∞ "üìà –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É"
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–∏–≥—Ä–∞—Ü–∏–∏, –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏

#### 4. `front/src/pages/settings/ui/SettingsPage.module.css`
- **–î–æ–±–∞–≤–ª–µ–Ω—ã CSS –∫–ª–∞—Å—Å—ã –¥–ª—è —Å–µ–∫—Ü–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–π:**
  - `.migrationList` - —Å–ø–∏—Å–æ–∫ –º–∏–≥—Ä–∞—Ü–∏–π —Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π
  - `.migrationItem` - —ç–ª–µ–º–µ–Ω—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ —Å hover —ç—Ñ—Ñ–µ–∫—Ç–æ–º
  - `.migrationHeader` - –∑–∞–≥–æ–ª–æ–≤–æ–∫ –º–∏–≥—Ä–∞—Ü–∏–∏
  - `.migrationDetails` - –¥–µ—Ç–∞–ª–∏ –≤ grid —Å–µ—Ç–∫–µ
  - –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã:
- **CSS –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –æ—Ç–∫–∞—á–µ–Ω CSS
- **–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏:** –õ–∏—à–Ω—è—è –∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞ –≤ CSS
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `themes.css`
- **CSS race condition:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Å—Ç–∏–ª–µ–π –Ω–∞ –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏

### –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å:
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é `4_accounts_room_ids.ts` –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é roomIds –ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- **CSS race condition –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —á–∞—Ç–æ–≤:** –ü—Ä–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ 1650x1422 —Å—Ç–∏–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏, –Ω–æ —Ä–∞–±–æ—Ç–∞–ª–∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ —ç–∫—Ä–∞–Ω–∞. –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ fallback –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è CSS –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `--background-color`. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∑–∞–º–µ–Ω–æ–π –Ω–∞ `var(--les-bg-primary, #0a0a0a)` —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º fallback –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `/settings`
2. –ù–∞–π—Ç–∏ —Å–µ–∫—Ü–∏—é "‚è±Ô∏è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π"
3. –ù–∞–∂–∞—Ç—å "üìà –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É"
4. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ–±—â–µ–µ –≤—Ä–µ–º—è –∏ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ –º–∏–≥—Ä–∞—Ü–∏—è–º

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–æ–≤ –∏–∑ themes.css:
- `--les-bg-primary`, `--les-bg-secondary` - —Ñ–æ–Ω—ã
- `--les-text-primary`, `--les-text-secondary` - —Ç–µ–∫—Å—Ç
- `--les-accent-primary`, `--les-accent-secondary` - –∞–∫—Ü–µ–Ω—Ç—ã
- `--les-border-primary` - –≥—Ä–∞–Ω–∏—Ü—ã
- `--les-success`, `--les-warning`, `--les-error` - —Å—Ç–∞—Ç—É—Å—ã

### –ò–º–ø–æ—Ä—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã:
```typescript
// –í SettingsScreen.svelte
import { getMigrationStats } from "../../../indexdb/db_state_manager_v1/db_state_manager";
import { DB_NAMES } from "../../../indexdb/constants";
```
