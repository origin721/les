import{p as le,s as q,h as oe,u as de,V as ce,W as a,M as D,X as M,j as o,l as e,Y as C,f as _,n as d,v as I,d as m,e as ve,Z as ue,F as ge,_ as fe,y as v,L as pe,m as me,E as S,z as w,R as _e,$ as y,a0 as he,q as Fe,a1 as Pe,a2 as Ee,a3 as be}from"./index-Dq12CK1s.js";import{B as qe}from"./BasePage-C1xdJAKE.js";import{C as De}from"./ContentSection-BLJzn5vh.js";import{s as B}from"./index-C8A6OeJ0.js";var Se=_('<span class="button-icon svelte-1qra951">üë•</span> <span class="button-text svelte-1qra951">–î–û–ë–ê–í–ò–¢–¨ –î–†–£–ì–ê</span>',1),ye=_('<div class="friends-grid svelte-1qra951"></div>'),$e=_('<div class="friends-container svelte-1qra951" data-widget-name="FriendsPage"><div class="status-message svelte-1qra951"><div class="simple-status svelte-1qra951"><span class="status-dot svelte-1qra951">‚óè</span> <span class="status-text svelte-1qra951">OK - –°–ò–°–¢–ï–ú–ê –î–†–£–ó–ï–ô –ê–ö–¢–ò–í–ù–ê</span></div></div> <div class="action-buttons svelte-1qra951"><!> <button class="action-button secondary svelte-1qra951"><span class="button-icon svelte-1qra951"> </span> <span class="button-text svelte-1qra951">–û–ë–ù–û–í–ò–¢–¨</span></button></div> <div class="friends-list svelte-1qra951"><h2 class="section-title svelte-1qra951"><span class="title-icon svelte-1qra951">üìã</span> –°–ü–ò–°–û–ö –î–†–£–ó–ï–ô</h2> <div class="content-container svelte-1qra951"><!> <!></div></div> <div class="footer-status svelte-1qra951"><span class="footer-info svelte-1qra951"> </span></div></div>'),Ae=_("<div><!></div>");function Re(k,O){le(O,!0);const[V,U]=ue(),W=()=>fe(he,"$theme",V);let s=q(oe([])),u=q(!0),g=q(null),f=null;de(()=>(h(),Y(),()=>{f&&(f.close(),f=null)}));function Y(){try{f=new BroadcastChannel(ce.FRONT_MIDDLEWARE),f.addEventListener("message",j),a("üì° FriendsPage: Broadcast –∫–∞–Ω–∞–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω")}catch(i){D("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ broadcast –∫–∞–Ω–∞–ª–∞:",i)}}function j(i){const{action:t,data:l}=i.data;a("üì¢ FriendsPage: –ü–æ–ª—É—á–µ–Ω–æ broadcast —Å–æ–æ–±—â–µ–Ω–∏–µ:",t,l),t===M.ADD_FRIENDS?(a("‚ûï FriendsPage: –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π —á–µ—Ä–µ–∑ broadcast –Ω–∞–ø—Ä—è–º—É—é"),l.list&&Array.isArray(l.list)?(o(s,l.list,!0),a(`üìä FriendsPage: –û–±–Ω–æ–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ broadcast: ${e(s).length} –¥—Ä—É–∑–µ–π`)):(a("‚ö†Ô∏è FriendsPage: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ broadcast, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —á–µ—Ä–µ–∑ API"),h())):t===M.DELETE_FRIENDS&&(a("‚ûñ FriendsPage: –£–¥–∞–ª—è–µ–º –¥—Ä—É–∑–µ–π —á–µ—Ä–µ–∑ broadcast:",l.ids),o(s,e(s).filter(r=>!l.ids.includes(r.id)),!0))}async function h(){a("üîÑ FriendsPage: –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –¥—Ä—É–∑–µ–π..."),o(u,!0),o(g,null);const i=Date.now();try{C("üìû FriendsPage: –í—ã–∑—ã–≤–∞–µ–º api.friends.getList()...");const r=await B.friends.getList();C("‚úÖ FriendsPage: –ü–æ–ª—É—á–µ–Ω —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π:",r),o(s,r||[],!0),a(`üìä FriendsPage: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ä—É–∑–µ–π: ${e(s).length}`),e(s).length===0?a("üì≠ FriendsPage: –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –ø—É—Å—Ç"):a("üë• FriendsPage: –ò–º–µ–Ω–∞ –¥—Ä—É–∑–µ–π:",e(s).map(p=>p.namePub))}catch(r){D("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥—Ä—É–∑–µ–π:",r),o(g,`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π: ${(r==null?void 0:r.message)||String(r)}`)}const t=Date.now()-i,l=Math.max(0,1e3-t);setTimeout(()=>{o(u,!1),a("üèÅ FriendsPage: –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —á–µ—Ä–µ–∑",t+l,"ms")},l)}async function z(i){if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –¥—Ä—É–≥–∞?"))try{a("üóëÔ∏è FriendsPage: –£–¥–∞–ª—è–µ–º –¥—Ä—É–≥–∞ —Å ID:",i),await B.friends.delete([i]),o(s,e(s).filter(t=>t.id!==i),!0),be("‚úÖ FriendsPage: –î—Ä—É–≥ —É–¥–∞–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ")}catch(t){D("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞:",t),o(g,"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞")}}function $(){a("üîÑ FriendsPage: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞"),h()}var F=Ae(),H=d(F);qe(H,{title:"–î–†–£–ó–¨–Ø",subtitle:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º –¥—Ä—É–∑–µ–π",pageName:"FriendsPage",footerVersion:"// FRIENDS_SYSTEM_v2.0 //",footerStatus:"MODE: SVELTE5",children:t=>{De(t,{title:"–°–ò–°–¢–ï–ú–ê –î–†–£–ó–ï–ô",children:r=>{var p=$e(),A=v(d(p),2),T=d(A);const K=me(()=>"#"+_e.ADD_FRIEND);pe(T,{get href(){return e(K)},className:"action-button primary",children:(n,N)=>{var E=Se();m(n,E)},$$slots:{default:!0}});var P=v(T,2);P.__click=$;var X=d(P),Z=d(X),L=v(A,2),G=v(d(L),2),x=d(G);{var J=n=>{y(n,{type:"error",get message(){return e(g)},actionText:"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É",onAction:$})},Q=(n,N)=>{{var E=c=>{y(c,{type:"empty",title:"–°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –ø—É—Å—Ç",message:"–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –¥—Ä—É–≥–∞, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ"})},ne=c=>{var R=ye();Fe(R,21,()=>e(s),b=>b.id,(b,ie)=>{Ee(b,{get friend(){return e(ie)},onDelete:z,onChat:()=>{}})}),m(c,R)};S(n,c=>{e(s).length===0?c(E):c(ne,!1)},N)}};S(x,n=>{e(g)?n(J):n(Q,!1)})}var ee=v(x,2);{var se=n=>{y(n,{type:"loading",message:"–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π...",overlay:!0})};S(ee,n=>{e(u)&&n(se)})}var ae=v(L,2),te=d(ae),re=d(te);I(()=>{P.disabled=e(u),w(Z,e(u)?"‚ü≥":"üîÑ"),w(re,`// FRIENDS_SYSTEM_v2.0 // STATUS: ${e(s).length??""}
                                –î–†–£–ó–ï–ô // SVELTE5 //`)}),m(r,p)},$$slots:{default:!0}})},$$slots:{default:!0}}),I(()=>ge(F,1,`theme-${W()??""}`,"svelte-1qra951")),m(k,F),ve(),U()}Pe(["click"]);export{Re as default};
