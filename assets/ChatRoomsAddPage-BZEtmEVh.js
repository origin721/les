import{ab as q,ad as Z,a8 as $,p as ee,f as H,n as o,T as te,L as se,d as m,l,m as S,ae as re,a0 as C,s as ae,y as d,O as P,t as y,Y as oe,k as ne,E as ie,v as de,w as le,e as ce,W as me,j as M,ac as ve,af as _e,a6 as j,R as w,ag as ue,I as pe,ah as fe,a2 as ge}from"./index-CaM9Q79c.js";import{I as xe}from"./Input-D6KX8GtI.js";import{A as be}from"./AnimatedTitle-dy5rdA7g.js";import{P as he}from"./PageFooter-CDYVhQiz.js";ye();function ye(){const i=q(we());function p(s){const t=$();return i.update(e=>{const n={...e.rooms,[t]:{name:s.name,room_id:t,messages:{}}};return{...e,rooms:n}}),{roomId:t}}const v=s=>{const t=$();i.update(e=>({...e,rooms:{...e.rooms,[s.roomId]:{...e.rooms[s.roomId],messages:{...e.rooms[s.roomId].messages,[t]:{text:s.message,created_date:new Date}}}}}))};function f(s){i.update(t=>{try{let e={...t,my_ids_for_server:t.my_ids_for_server||{}};return e.my_ids_for_server={...e.my_ids_for_server},delete e.my_ids_for_server[s.user_id],e}catch(e){return console.error(import.meta.url,e),t}})}function _(s){i.update(t=>{try{let e={...t,my_ids_for_server:t.my_ids_for_server||{}};return e.my_ids_for_server={...e.my_ids_for_server,[s.user_id]:s.user_id},e}catch(e){return console.error(import.meta.url,e),t}})}return{subscribe:i.subscribe,add_message:v,add_room:p,get_room_by_id:s=>Object.values(Z(i).rooms).find(t=>t.room_id===s)||null,registration_by_id:_,delete_registration_by_id:f}}function we(){return{rooms:{},my_ids_for_server:{}}}var $e=H('<span class="text-lg">‚Üê</span> –ù–ê–ó–ê–î –ö –ß–ê–¢–ê–ú',1),ke=H('<div class="add-room-container svelte-1qh3kcd" data-widget-name="ChatRoomsAddPage"><header class="add-room-header svelte-1qh3kcd"><!> <div class="z-10"><!></div></header> <main class="add-room-content svelte-1qh3kcd"><div class="max-w-2xl mx-auto"><div class="mb-8"><!></div> <div class="bg-[var(--les-bg-secondary)] border border-[var(--les-border-primary)] rounded-lg p-8 shadow-lg shadow-[var(--les-accent-primary)]/10"><div class="mb-6"><h2 class="text-2xl font-mono uppercase tracking-wider text-[var(--les-text-primary)] mb-2">üí¨ –ù–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞</h2> <p class="text-[var(--les-text-secondary)] font-mono text-sm">–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∫–æ–º–Ω–∞—Ç—É –¥–ª—è –æ–±—â–µ–Ω–∏—è</p></div> <form class="space-y-6"><div class="space-y-2"><label for="room-name" class="block text-sm font-mono uppercase tracking-wider text-[var(--les-text-primary)]">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã *</label> <!> <p class="text-xs text-[var(--les-text-secondary)] font-mono">–í–≤–µ–¥–∏—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–π –∫–æ–º–Ω–∞—Ç—ã</p></div> <div class="bg-[var(--les-bg-primary)] border border-[var(--les-border-secondary)] rounded-lg p-4"><h3 class="text-sm font-mono uppercase tracking-wider text-[var(--les-accent-primary)] mb-3">üîí –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–Ω–∞—Ç—ã</h3> <ul class="space-y-2 text-xs font-mono text-[var(--les-text-secondary)]"><li class="flex items-center gap-2"><span class="text-[var(--les-accent-primary)]">‚Ä¢</span> End-to-End —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π</li> <li class="flex items-center gap-2"><span class="text-[var(--les-accent-primary)]">‚Ä¢</span> P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–æ–≤</li> <li class="flex items-center gap-2"><span class="text-[var(--les-accent-primary)]">‚Ä¢</span> –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏</li> <li class="flex items-center gap-2"><span class="text-[var(--les-accent-primary)]">‚Ä¢</span> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏</li></ul></div> <div class="flex gap-4 justify-end pt-4"><div class="min-w-[7.5rem]"><!></div> <div class="min-w-[7.5rem] create-button svelte-1qh3kcd"><!></div></div></form></div> <div class="mt-8 bg-[var(--les-bg-warning)] border border-[var(--les-border-warning)] rounded-lg p-4"><div class="flex items-start gap-3"><span class="text-[var(--les-accent-warning)] text-lg mt-1">‚ö†Ô∏è</span> <div><h4 class="text-sm font-mono uppercase tracking-wider text-[var(--les-text-primary)] mb-1">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h4> <p class="text-xs font-mono text-[var(--les-text-secondary)]">–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–º–Ω–∞—Ç–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –¥–æ–≤–µ—Ä—è–µ—Ç–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –∫–æ–º–Ω–∞—Ç—ã.</p></div></div></div></div></main> <!></div>');function Ee(i,p){ee(p,!0);const v=()=>C(e,"$name_field",_),f=()=>C(ge,"$theme",_),[_,s]=me(),t="no name";let e=q(""),n=ae(!1);function g(){var r;if(!(l(n)||!((r=v())!=null&&r.trim()))){M(n,!0);try{ve([[_e.ROOM_ID,$()]]),j.setRoute({hash:w.CHAT_ROOMS})}catch(a){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–Ω–∞—Ç—ã:",a),M(n,!1)}}}function N(){j.setRoute({hash:w.CHAT_ROOMS})}var x=ke(),k=o(x),R=o(k);be(R,{title:"CREATE_NEW_CHAT_ROOM",subtitle:"–°–û–ó–î–ê–ù–ò–ï_–ù–û–í–û–ô_–ö–û–ú–ù–ê–¢–´",statusText:"–°–ò–°–¢–ï–ú–ê –ê–ö–¢–ò–í–ù–ê",className:"add-room-title"});var D=d(R,2),L=o(D);te(L);var O=d(k,2),Q=o(O),A=o(Q),U=o(A);{let r=S(()=>"#"+w.CHAT_ROOMS);se(U,{get href(){return l(r)},className:"inline-flex items-center gap-2 text-[var(--les-accent-primary)] hover:text-[var(--les-accent-secondary)] transition-colors duration-200 text-sm font-mono uppercase tracking-wider",children:(a,b)=>{var u=$e();m(a,u)},$$slots:{default:!0}})}var W=d(A,2),T=d(o(W),2),E=o(T),Y=d(o(E),2);xe(Y,{id:"room-name",placeholder:t,get disabled(){return l(n)},onkeydown:r=>r.key==="Enter"&&g(),get value(){return ue(),v()},set value(r){re(e,r)}});var z=d(E,4),I=o(z),B=o(I);P(B,{onclick:N,variant:"ghost",get disabled(){return l(n)},children:(r,a)=>{var b=y("–û—Ç–º–µ–Ω–∞");m(r,b)},$$slots:{default:!0}});var F=d(I,2),G=o(F);{let r=S(()=>{var a;return l(n)||!((a=v())!=null&&a.trim())});P(G,{onclick:g,get disabled(){return l(r)},children:(a,b)=>{var u=oe(),K=ne(u);{var V=c=>{var h=y("–°–æ–∑–¥–∞–Ω–∏–µ...");m(c,h)},X=c=>{var h=y("üöÄ –°–æ–∑–¥–∞—Ç—å");m(c,h)};ie(K,c=>{l(n)?c(V):c(X,!1)})}m(a,u)},$$slots:{default:!0}})}var J=d(O,2);he(J,{}),de(()=>pe(x,"data-theme",f())),le("submit",T,function(...r){var a;(a=fe)==null||a.apply(this,r)}),m(i,x),ce(),s()}export{Ee as default};
