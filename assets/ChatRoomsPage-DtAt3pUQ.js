import{d as S,C as T,r as M,R as $,g as x,h as k,f as O,i as w,M as A,l as e,k as u,E as n,m as H,N as I,a as P,j as a}from"./index-D5xxotLR.js";import{e as o}from"./events_store-CcVhJIZI.js";import{P as j}from"./PageLayout-KzRhJSto.js";import"./PageFooter-C5-sZywS.js";var y=O("<!> <!>",1);function W(d,c){S(c,!0);const[_,f]=k(),l=()=>M(o,"$events_store",_);let s=u(!0),t=u(null),g=n(()=>e(t)?o.get_room_by_id(e(t)):null);function h(r){e(t)&&o.add_message({roomId:e(t),message:r})}function p(r){a(t,r,!0),window.innerWidth<768&&a(s,!1)}function R(){a(s,!0),a(t,null)}T(()=>{Object.keys(l().rooms).length===0&&(o.add_room({name:"Общий чат"}),o.add_room({name:"Техподдержка"}))}),j(d,{title:"SECURE_CHAT_SYSTEM",subtitle:"ТЕРМИНАЛ_ЗАЩИЩЕННОЙ_СВЯЗИ",statusText:"КАНАЛЫ АКТИВНЫ",get backButtonHref(){return $.HOME},backButtonText:"← ГЛАВНАЯ",versionPrefix:"SECURE_CHAT_TERMINAL_v",contentClass:"chat-content flex",children:b=>{var i=y(),m=w(i);const v=n(()=>Object.values(l().rooms));A(m,{get rooms(){return e(v)},get selectedRoomId(){return e(t)},onRoomSelect:p,get showOnMobile(){return e(s)}});var C=H(m,2);const E=n(()=>!e(s));I(C,{get room(){return e(g)},get showOnMobile(){return e(E)},onBackToRooms:R,onSendMessage:h}),P(b,i)},$$slots:{default:!0}}),x(),f()}export{W as default};
