import{d as te,p as z,f as h,x as Me,s as ze,n as Ie,c as o,a as f,g as se,y as Re,m as _,z as A,t as N,b as X,A as j,k as M,B as Te,C as Be,j as x,l as e,L as ue,D as Z,E as k,G as ce,i as K,H as Ae,r as ee,h as ge,I as Ue,J as Ee,K as He,R as Le,Q as Ke,u as qe}from"./index-D5xxotLR.js";import{r as Qe}from"./legacy-client-Cz1GGiDI.js";import{e as ve}from"./events_store-CcVhJIZI.js";import{B as de,I as Ye}from"./Input-D2kba7ts.js";import{S as V}from"./StatusIndicator-DXyl-0EB.js";const Fe="_card_1js0h_4",Ge="_sm_1js0h_11",Je="_md_1js0h_15",We="_lg_1js0h_19",Ve="_xl_1js0h_23",Xe="_elevated_1js0h_37",Ze="_interactive_1js0h_50",et="_glowing_1js0h_68",tt="_flat_1js0h_82",st="_shimmer_1js0h_93",at="_pulse_1js0h_103",rt="_float_1js0h_116",nt="_header_1js0h_126",ot="_body_1js0h_131",it="_footer_1js0h_135",lt="_image_1js0h_140",ct="_title_1js0h_144",vt="_subtitle_1js0h_150",dt="_content_1js0h_155",L={card:Fe,sm:Ge,md:Je,lg:We,xl:Ve,default:"_default_1js0h_28",elevated:Xe,interactive:Ze,glowing:et,flat:tt,shimmer:st,pulse:at,"card-pulse":"_card-pulse_1js0h_1",float:rt,"card-float":"_card-float_1js0h_1",header:nt,body:ot,footer:it,image:lt,title:ct,subtitle:vt,content:dt};var _t=h("<div><!></div>");function _e(a,t){te(t,!0);let v=z(t,"variant",3,"default"),r=z(t,"size",3,"md"),c=z(t,"className",3,""),s=Re(t,["$$slots","$$events","$$legacy","variant","size","effect","onclick","className","children"]);const l=()=>{let m=[L.card,L[r()],L[v()]];return t.effect&&m.push(L[t.effect]),c()&&m.push(c()),m.join(" ")};var i=_t();Me(i,m=>({class:m,onclick:t.onclick,role:t.onclick?"button":void 0,...t.onclick?{tabindex:0}:{},...s}),[l]);var d=o(i);ze(d,()=>t.children??Ie),f(a,i),se()}var mt=h('<div class="page-subtitle svelte-dr7ybo"><span class="typing-text svelte-dr7ybo"> </span> <span class="cursor svelte-dr7ybo">‚ñà</span></div>'),ft=h("<div><h1> </h1> <!></div>");function me(a,t){let v=z(t,"animated",3,!0),r=z(t,"glitch",3,!0),c=z(t,"className",3,"");var s=ft(),l=o(s);let i;var d=o(l),m=_(l,2);{var O=u=>{var $=mt(),I=o($),w=o(I);N(()=>j(w,t.subtitle)),f(u,$)};A(m,u=>{t.subtitle&&u(O)})}N(u=>{X(s,1,`page-title-container ${c()??""}`,"svelte-dr7ybo"),i=X(l,1,"page-title svelte-dr7ybo",null,i,u),j(d,t.title)},[()=>({"glitch-title":r(),"animated-title":v()})]),f(a,s)}function he(a,t){t.timestamp||(console.warn("Message without timestamp, using current time"),t.timestamp=Date.now());const v=new Date(t.timestamp),r=v.getFullYear(),c=v.getMonth()+1,s=v.getDate(),l=v.getHours(),i=v.getMinutes(),d=v.getSeconds();return a[r]||(a[r]={}),a[r][c]||(a[r][c]={}),a[r][c][s]||(a[r][c][s]={}),a[r][c][s][l]||(a[r][c][s][l]={}),a[r][c][s][l][i]||(a[r][c][s][l][i]={}),a[r][c][s][l][i][d]||(a[r][c][s][l][i][d]={}),a[r][c][s][l][i][d][t.id]=t,a}function fe(a){const t=[];for(const v of Object.values(a.messageByIdDate))for(const r of Object.values(v))for(const c of Object.values(r))for(const s of Object.values(c))for(const l of Object.values(s))for(const i of Object.values(l))for(const d of Object.values(i))t.push(d);return t.sort((v,r)=>(v.timestamp||0)-(r.timestamp||0))}function ut(a){const t={id:a,sourceName:"–¢–µ—Å—Ç–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞",localName:`ROOM_${a}`,myAccId:"user1",messageByIdDate:{}},v=[{id:"msg1",message:[{type:"text",content:"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã–π –∫–∞–Ω–∞–ª!"}],timestamp:Date.now()-36e5,sender:"system"},{id:"msg2",message:[{type:"text",content:"–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"}],timestamp:Date.now()-18e5,sender:"system"},{id:"msg3",message:[{type:"text",content:"–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?"}],timestamp:Date.now()-9e5,sender:"user2"},{id:"msg4",message:[{type:"text",content:"–û—Ç–ª–∏—á–Ω–æ! –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö"}],timestamp:Date.now()-3e5,sender:"user1"},{id:"msg5",message:[{type:"text",content:"–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —á–∞—Å–∞–º–∏/–º–∏–Ω—É—Ç–∞–º–∏/—Å–µ–∫—É–Ω–¥–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ!"}],timestamp:Date.now()-6e4,sender:"user2"}];for(const r of v)he(t.messageByIdDate,r);return t}var gt=h('<div class="empty-messages svelte-ry54fb"><div class="empty-icon svelte-ry54fb">üí¨</div> <h3 class="empty-title svelte-ry54fb">–ö–ê–ù–ê–õ_–ü–£–°–¢</h3> <p class="empty-description svelte-ry54fb">–ù–∞—á–Ω–∏—Ç–µ –∑–∞—â–∏—â–µ–Ω–Ω—É—é –ø–µ—Ä–µ–ø–∏—Å–∫—É</p></div>'),ht=h('<span class="message-text svelte-ry54fb"> </span>'),pt=h('<div><div class="message-header svelte-ry54fb"><span class="sender-name svelte-ry54fb"> </span> <span class="message-time svelte-ry54fb"> </span> <span class="message-id svelte-ry54fb"> </span></div> <div class="message-content svelte-ry54fb"></div> <div class="message-footer svelte-ry54fb"><div class="message-indicator svelte-ry54fb"></div></div></div>'),yt=h('<div class="messages-container svelte-ry54fb"><!> <!></div>'),bt=h('<div class="input-header svelte-ry54fb"><h3 class="input-title svelte-ry54fb">// –û–¢–ü–†–ê–í–ò–¢–¨_–°–û–û–ë–©–ï–ù–ò–ï //</h3> <!></div> <div class="message-form svelte-ry54fb"><div class="input-group svelte-ry54fb"><label class="input-label svelte-ry54fb">–¢–ï–ö–°–¢_–°–û–û–ë–©–ï–ù–ò–Ø:</label> <!></div> <div class="form-actions svelte-ry54fb"><!> <div class="message-stats svelte-ry54fb"><span class="stat-item svelte-ry54fb"> </span></div></div></div>',1),xt=h('<div class="chat-container svelte-ry54fb" data-widget-name="ChatPage"><div class="chat-page svelte-ry54fb"><div class="chat-header svelte-ry54fb"><div class="header-top svelte-ry54fb"><!> <!></div> <!></div> <div class="messages-section svelte-ry54fb"><!></div> <div class="input-section svelte-ry54fb"><!></div> <div class="chat-footer svelte-ry54fb"><div class="footer-info svelte-ry54fb"><span class="footer-text svelte-ry54fb">// –ó–ê–©–ò–©–ï–ù–ù–´–ô_–¢–ï–†–ú–ò–ù–ê–õ_–°–í–Ø–ó–ò //</span> <div class="connection-info svelte-ry54fb"><!> <span class="encryption-type svelte-ry54fb">AES-256</span></div></div></div></div></div>');function jt(a,t){te(t,!0);const[v,r]=ge(),c=()=>ee(Ue,"$theme",v);let s=M(null),l=M(Te([])),i=M(""),d=M(!1),m=M("loading");Be(()=>{const g=new URL(window.location.href).searchParams.get("room_id");g&&setTimeout(()=>{x(s,ut(g),!0),e(s)&&x(l,fe(e(s)),!0),x(m,"active")},500)});function O(){!e(i).trim()||e(d)||!e(s)||(x(d,!0),setTimeout(()=>{const n={id:`msg_${Date.now()}`,message:[{type:"text",content:e(i)}],timestamp:Date.now(),sender:"user1"};e(s)&&(he(e(s).messageByIdDate,n),x(l,fe(e(s)),!0)),x(i,""),x(d,!1),setTimeout(()=>{const g=document.querySelector(".messages-container");g&&(g.scrollTop=g.scrollHeight)},100)},300))}function u(n){return n?new Date(n).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}):"--:--"}function $(n){return n==="system"?"system":n==="user1"?"own":"other"}function I(n){return n==="system"?"–°–ò–°–¢–ï–ú–ê":n==="user1"?"–í–´":`–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨_${(n==null?void 0:n.toUpperCase())||"UNKNOWN"}`}var w=xt(),ae=o(w),U=o(ae),re=o(U),ne=o(re);ue(ne,{href:"/chat_rooms",children:(n,g)=>{de(n,{variant:"secondary",size:"sm",children:(D,C)=>{var R=Z("‚Üê –ù–ê–ó–ê–î_–ö_–°–ü–ò–°–ö–£");f(D,R)},$$slots:{default:!0}})},$$slots:{default:!0}});var pe=_(ne,2);const ye=k(()=>e(m)==="active"?"–ö–ê–ù–ê–õ_–ê–ö–¢–ò–í–ï–ù":e(m)==="loading"?"–ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï...":"–ö–ê–ù–ê–õ_–ù–ï–ê–ö–¢–ò–í–ï–ù");V(pe,{get status(){return e(m)},get text(){return e(ye)}});var be=_(re,2);{var xe=n=>{const g=k(()=>`ID_–ö–ê–ù–ê–õ–ê: ${e(s).id} | –ò–°–¢–û–ß–ù–ò–ö: ${e(s).sourceName}`);me(n,{get title(){return e(s).localName},get subtitle(){return e(g)}})},je=n=>{me(n,{title:"–ó–ê–ì–†–£–ó–ö–ê_–ö–ê–ù–ê–õ–ê...",subtitle:"–£–°–¢–ê–ù–û–í–ö–ê_–ó–ê–©–ò–©–ï–ù–ù–û–ì–û_–°–û–ï–î–ò–ù–ï–ù–ò–Ø"})};A(be,n=>{e(s)?n(xe):n(je,!1)})}var oe=_(U,2),$e=o(oe);_e($e,{variant:"flat",size:"lg",className:"messages-card",children:(n,g)=>{var D=yt(),C=o(D);{var R=y=>{var b=gt();f(y,b)};A(C,y=>{e(l).length===0&&y(R)})}var q=_(C,2);ce(q,17,()=>e(l),y=>y.id,(y,b)=>{var P=pt(),E=o(P),H=o(E),Q=o(H),T=_(H,2),Y=o(T),F=_(T,2),G=o(F),J=_(E,2);ce(J,21,()=>e(b).message,Ee,(p,B)=>{var S=He(),Ce=K(S);{var Pe=W=>{var le=ht(),ke=o(le);N(()=>j(ke,e(B).content)),f(W,le)};A(Ce,W=>{e(B).type==="text"&&W(Pe)})}f(p,S)}),N((p,B,S)=>{X(P,1,`message ${p??""}`,"svelte-ry54fb"),j(Q,B),j(Y,S),j(G,`#${e(b).id??""}`)},[()=>$(e(b).sender),()=>I(e(b).sender),()=>u(e(b).timestamp)]),f(y,P)}),f(n,D)},$$slots:{default:!0}});var ie=_(oe,2),we=o(ie);_e(we,{variant:"elevated",size:"md",children:(n,g)=>{var D=bt(),C=K(D),R=_(o(C),2);const q=k(()=>e(d)?"loading":"active"),y=k(()=>e(d)?"–û–¢–ü–†–ê–í–ö–ê...":"–ì–û–¢–û–í_–ö_–û–¢–ü–†–ê–í–ö–ï");V(R,{get status(){return e(q)},get text(){return e(y)},size:"sm"});var b=_(C,2),P=o(b),E=_(o(P),2);const H=k(()=>e(d)||e(m)!=="active");Ye(E,{placeholder:"–í–í–ï–î–ò–¢–ï_–í–ê–®–ï_–°–û–û–ë–©–ï–ù–ò–ï...",size:"lg",get disabled(){return e(H)},onkeydown:p=>p.key==="Enter"&&!p.shiftKey&&O(),get value(){return e(i)},set value(p){x(i,p,!0)}});var Q=_(P,2),T=o(Q);const Y=k(()=>!e(i).trim()||e(d)||e(m)!=="active");de(T,{onclick:O,variant:"primary",size:"md",get disabled(){return e(Y)},get loading(){return e(d)},children:(p,B)=>{var S=Z();N(()=>j(S,e(d)?"–û–¢–ü–†–ê–í–ö–ê...":"–û–¢–ü–†–ê–í–ò–¢–¨")),f(p,S)},$$slots:{default:!0}});var F=_(T,2),G=o(F),J=o(G);N(()=>j(J,`–°–ò–ú–í–û–õ–û–í: ${e(i).length??""}/1000`)),f(n,D)},$$slots:{default:!0}});var De=_(ie,2),Se=o(De),Ne=_(o(Se),2),Oe=o(Ne);V(Oe,{status:"active",text:"–®–ò–§–†–û–í–ê–ù–ò–ï_–ê–ö–¢–ò–í–ù–û",size:"sm"}),N(()=>Ae(w,"data-theme",c())),f(a,w),se(),r()}var $t=h('<!> <h1 class="text-rose-600">–ö–æ–º–Ω–∞—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</h1>',1),wt=h('<h1 class="text-cyan-400 text-lg">Chat</h1> <!>',1);function Pt(a,t){te(t,!0);const[v,r]=ge(),c=()=>ee(ve,"$events_store",v),s=()=>ee(qe,"$routingStore",v);let l=M(null);Qe(()=>{c(),x(l,ve.get_room_by_id(s().queryParams.get(Ke.ROOM_ID)),!0)});var i=wt(),d=_(K(i),2);{var m=u=>{jt(u,{get room(){return e(l)}})},O=u=>{var $=$t(),I=K($);ue(I,{className:"text-yellow-500",get href(){return Le.CHAT_ROOMS},children:(w,ae)=>{var U=Z("back");f(w,U)},$$slots:{default:!0}}),f(u,$)};A(d,u=>{e(l)?u(m):u(O,!1)})}f(a,i),se(),r()}export{Pt as default};
