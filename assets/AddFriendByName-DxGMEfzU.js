import{a as I,f as x,x as u,l as o,G as J,a8 as Q,n as N,E as S,y as _,d as y,ad as K,k as C,D as P,N as X,L as Z,m as $,w as t,C as ee,p as W,S as Y,g as D,H as ae,e as z,aw as te,i as ne,u as re,O as se,s as T,j as m,ax as oe,R as ie}from"./index-oupD5_sx.js";import{B as le}from"./BasePage-DJGRqp7W.js";import{C as ce}from"./ContentSection-Pw1z-ona.js";import{I as de}from"./Input-CXqkMGdR.js";import{s as ve}from"./index-BnU-e3uO.js";var me=x('<div><div class="form-card-header svelte-14r9mkl"><div class="form-card-icon svelte-14r9mkl"> </div> <h3 class="form-card-title svelte-14r9mkl"> </h3></div> <div class="form-card-content svelte-14r9mkl"><!></div></div>');function ue(f,a){let s=I(a,"icon",3,"üìù"),l=I(a,"className",3,"");var i=me(),e=o(i),n=o(e),c=o(n),v=u(n,2),d=o(v),p=u(e,2),b=o(p);J(b,()=>a.children??Q),N(()=>{S(i,1,`form-card ${l()??""}`,"svelte-14r9mkl"),_(c,s()),_(d,a.title)}),y(f,i)}var fe=x('<div><span class="message-icon svelte-7miv88"> </span> <span class="message-text"> </span></div>');function ge(f,a){var s=K(),l=C(s);{var i=e=>{var n=fe(),c=o(n),v=o(c),d=u(c,2),p=o(d);N(()=>{S(n,1,`form-message form-message-${a.type??""}`,"svelte-7miv88"),_(v,a.type==="success"?"‚úÖ":"‚ùå"),_(p,a.message)}),y(e,n)};P(l,e=>{a.message&&a.type&&e(i)})}y(f,s)}var _e=x("<span> </span>"),ye=x('<span class="button-icon svelte-1e5tsq"> </span> <span> </span>',1),he=x('<span class="button-icon svelte-1e5tsq"> </span> <span> </span>',1),pe=x('<div class="form-actions svelte-1e5tsq"><!> <!></div>');function xe(f,a){let s=I(a,"primaryLoadingText",3,"–ó–ê–ì–†–£–ó–ö–ê..."),l=I(a,"primaryIcon",3,"‚úì"),i=I(a,"secondaryIcon",3,"‚¨ÖÔ∏è");var e=pe(),n=o(e);X(n,{variant:"primary",size:"lg",get onclick(){return a.onPrimaryClick},get disabled(){return a.disabled},get loading(){return a.loading},children:p=>{var b=K(),A=C(b);{var k=h=>{var r=_e(),g=o(r);N(()=>_(g,s())),y(h,r)},w=h=>{var r=ye(),g=C(r),L=o(g),E=u(g,2),F=o(E);N(()=>{_(L,l()),_(F,a.primaryText)}),y(h,r)};P(A,h=>{a.loading?h(k):h(w,!1)})}y(p,b)},$$slots:{default:!0}});var c=u(n,2);{var v=d=>{Z(d,{get href(){return a.secondaryHref},className:"action-button secondary",children:(p,b)=>{var A=he(),k=C(A),w=o(k),h=u(k,2),r=o(h);N(()=>{_(w,i()),_(r,a.secondaryText)}),y(p,A)},$$slots:{default:!0}})};P(c,d=>{a.secondaryText&&a.secondaryHref&&d(v)})}y(f,e)}var be=x('<div class="info-item svelte-1d98owt"><span class="info-icon svelte-1d98owt"> </span> <span class="info-text"> </span></div>'),Ae=x('<div class="form-info svelte-1d98owt"></div>');function Ie(f,a){var s=Ae();$(s,21,()=>a.items,ee,(l,i)=>{var e=be(),n=o(e),c=o(n),v=u(n,2),d=o(v);N(()=>{_(c,t(i).icon),_(d,t(i).text)}),y(l,e)}),y(f,s)}var ke=x('<div><label><span class="label-icon svelte-10ttpwy"> </span> <span class="label-text svelte-10ttpwy"> </span></label> <!></div>');function j(f,a){W(a,!0);let s=I(a,"icon",3,"üìù"),l=I(a,"placeholder",3,""),i=I(a,"required",3,!1),e=I(a,"disabled",3,!1);function n(w){const h=w.target;a.onchange&&a.onchange(h.value)}var c=ke(),v=o(c),d=o(v),p=o(d),b=u(d,2),A=o(b),k=u(v,2);de(k,{get id(){return a.id},get value(){return a.value},onchange:n,get onkeydown(){return a.onkeydown},get placeholder(){return l()},get disabled(){return e()}}),N(()=>{S(c,1,Y(D.group),"svelte-10ttpwy"),ae(v,"for",a.id),S(v,1,`${D.label} ${i()?D.labelRequired:""}`,"svelte-10ttpwy"),_(p,s()),_(A,a.label)}),y(f,c),z()}async function Ne(f,a){const{friendName:s,selectedAccountId:l}=f;if(!s.trim())return{success:!1,message:"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –¥—Ä—É–≥–∞",messageType:"error"};if(!l)return{success:!1,message:"–í—ã–±–µ—Ä–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç",messageType:"error"};const i=new Promise((e,n)=>{setTimeout(()=>n(new Error("Timeout: –æ–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–≤—ã—Å–∏–ª–∞ 10 —Å–µ–∫—É–Ω–¥")),1e4)});try{console.log("üîÑ –ù–∞—á–∏–Ω–∞–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∞...");const e=a.find(c=>c.id===l);console.log("üë§ –í—ã–±—Ä–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç:",e),e&&console.log("üîÑ –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é..."),console.log("üîÑ –î–æ–±–∞–≤–ª—è–µ–º –¥—Ä—É–≥–∞ —á–µ—Ä–µ–∑ API...");const n={namePub:s.trim(),myAccId:l,friendPubKeyLibp2p:""};return console.log("üìù –î–∞–Ω–Ω—ã–µ –¥—Ä—É–≥–∞:",n),await Promise.race([ve.friends.add({friends:[n],myAccId:l}),i]),console.log("‚úÖ –î—Ä—É–≥ –¥–æ–±–∞–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ"),{success:!0,message:`–î—Ä—É–≥ "${s}" –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤`,messageType:"success"}}catch(e){return console.error("‚ùå –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–∞:",e),console.error("‚ùå –ü–æ–ª–Ω–∞—è –æ—à–∏–±–∫–∞:",{message:e==null?void 0:e.message,stack:e==null?void 0:e.stack,name:e==null?void 0:e.name,error:e}),{success:!1,message:`–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞: ${(e==null?void 0:e.message)||String(e)}`,messageType:"error"}}}const we="_formContainer_1583c_3",Te={formContainer:we};var Fe=x("<!> <!> <!> <!> <!> <!>",1),Ce=x("<div><!></div>");function Be(f,a){W(a,!0);let s=T(""),l=T(""),i=T(""),e=T(!1),n=T(""),c=T("");const v=te(ne),d=se(()=>{var r;return Object.values(((r=v.state)==null?void 0:r.byId)||{})});re(()=>{t(d).length>0&&!t(i)&&m(i,t(d)[0].id,!0)});const p=[{icon:"üí°",text:"–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—ã —Å–º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞—â–∏—â–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"},{icon:"üîí",text:"–î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Å–≤—è–∑–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±–º–µ–Ω –∫–ª—é—á–∞–º–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è"}];async function b(){if(console.log("üîò handleAddFriend –≤—ã–∑–≤–∞–Ω",{loading:t(e),friendName:t(s).trim(),selectedAccountId:t(i)}),t(e)){console.log("‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–æ - –∏–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞");return}m(e,!0),m(n,""),m(c,"");const r={friendName:t(s).trim(),friendNickname:t(l).trim(),selectedAccountId:t(i)};console.log("üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ:",r);try{const g=await Ne(r,t(d));console.log("üì• –†–µ–∑—É–ª—å—Ç–∞—Ç:",g),m(n,g.message,!0),m(c,g.messageType,!0),g.success&&(m(s,""),m(l,""),console.log("‚úÖ –§–æ—Ä–º–∞ –æ—á–∏—â–µ–Ω–∞"))}catch(g){console.error("‚ùå Error in handleAddFriend:",g),m(n,"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞"),m(c,"error")}finally{m(e,!1),console.log("üîÑ Loading —Å–±—Ä–æ—à–µ–Ω")}}function A(r){r.key==="Enter"&&!t(e)&&t(s).trim()&&(r.preventDefault(),b())}function k(r){m(i,r,!0)}function w(r){m(s,r,!0)}function h(r){m(l,r,!0)}le(f,{title:"ADD_FRIEND_BY_NAME",subtitle:"–î–û–ë–ê–í–ò–¢–¨_–î–†–£–ì–ê",pageName:"AddFriendByNamePage",footerVersion:"// ADD_FRIEND_BY_NAME_v0.1.0 //",footerStatus:"MODE: SIMPLE",children:g=>{ce(g,{title:"// –î–û–ë–ê–í–ò–¢–¨ –î–†–£–ì–ê //",description:"–ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è",children:E=>{var F=Ce(),G=o(F);ue(G,{icon:"üë§",title:"–ù–û–í–´–ô –ö–û–ù–¢–ê–ö–¢",children:U=>{var q=Fe(),B=C(q);oe(B,{get accounts(){return t(d)},get selectedAccountId(){return t(i)},get loading(){return t(e)},onchange:k});var R=u(B,2);j(R,{id:"friend-name",label:"–ò–ú–Ø –î–†–£–ì–ê",icon:"üìù",get value(){return t(s)},placeholder:"–í–≤–µ–¥–∏—Ç–µ –∏–º—è...",required:!0,get disabled(){return t(e)},onchange:w,onkeydown:A});var M=u(R,2);j(M,{id:"friend-nickname",label:"–ù–ò–ö–ù–ï–ô–ú (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)",icon:"üè∑Ô∏è",get value(){return t(l)},placeholder:"–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è...",get disabled(){return t(e)},onchange:h,onkeydown:A});var H=u(M,2);ge(H,{get message(){return t(n)},get type(){return t(c)}});var O=u(H,2);xe(O,{primaryText:"–î–û–ë–ê–í–ò–¢–¨ –î–†–£–ì–ê",primaryLoadingText:"–î–û–ë–ê–í–õ–ï–ù–ò–ï...",primaryIcon:"‚ûï",secondaryText:"–ù–ê–ó–ê–î",secondaryIcon:"‚¨ÖÔ∏è",get secondaryHref(){return ie.FRIENDS},get loading(){return t(e)},get disabled(){return t(e)},onPrimaryClick:b});var V=u(O,2);Ie(V,{get items(){return p}}),y(U,q)},$$slots:{default:!0}}),N(()=>S(F,1,Y(Te.formContainer))),y(E,F)},$$slots:{default:!0}})},$$slots:{default:!0}}),z()}export{Be as default};
