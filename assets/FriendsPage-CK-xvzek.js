import{d as ie,k as E,U as le,a7 as oe,ap as de,aq as s,x as D,ar as I,j as o,l as e,as as M,f as h,c as d,t as w,a as m,g as ce,h as ve,b as ue,r as ge,m as v,Q as fe,R as pe,B as S,C as B,at as $,N as me,G as he,Z as ye,au as _e,av as Fe}from"./index-bOy5Y-zK.js";import{B as Pe}from"./BasePage-BR7agg88.js";import{C as be}from"./ContentSection-keDnddlu.js";import{s as k}from"./index-CgV8Bpck.js";var Ee=h('<span class="button-icon svelte-2ynt41">üë•</span> <span class="button-text svelte-2ynt41">–î–û–ë–ê–í–ò–¢–¨ –î–†–£–ì–ê</span>',1),De=h('<div class="friends-grid svelte-2ynt41"></div>'),Se=h('<div class="friends-container svelte-2ynt41" data-widget-name="FriendsPage"><div class="status-message svelte-2ynt41"><div class="simple-status svelte-2ynt41"><span class="status-dot svelte-2ynt41">‚óè</span> <span class="status-text svelte-2ynt41">OK - –°–ò–°–¢–ï–ú–ê –î–†–£–ó–ï–ô –ê–ö–¢–ò–í–ù–ê</span></div></div> <div class="action-buttons svelte-2ynt41"><!> <button class="action-button secondary svelte-2ynt41"><span class="button-icon svelte-2ynt41"> </span> <span class="button-text svelte-2ynt41">–û–ë–ù–û–í–ò–¢–¨</span></button></div> <div class="friends-list svelte-2ynt41"><h2 class="section-title svelte-2ynt41"><span class="title-icon svelte-2ynt41">üìã</span> –°–ü–ò–°–û–ö –î–†–£–ó–ï–ô</h2> <div class="content-container svelte-2ynt41"><!> <!></div></div> <div class="footer-status svelte-2ynt41"><span class="footer-info svelte-2ynt41"> </span></div></div>'),$e=h("<div><!></div>");function Le(O,U){ie(U,!0);const[V,W]=ve(),Y=()=>ge(me,"$theme",V);let t=E(le([])),u=E(!0),g=E(null),f=null;oe(()=>(y(),j(),()=>{f&&(f.close(),f=null)}));function j(){try{f=new BroadcastChannel(de.FRONT_MIDDLEWARE),f.addEventListener("message",q),s("üì° FriendsPage: Broadcast –∫–∞–Ω–∞–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω")}catch(i){D("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ broadcast –∫–∞–Ω–∞–ª–∞:",i)}}function q(i){const{action:a,data:l}=i.data;s("üì¢ FriendsPage: –ü–æ–ª—É—á–µ–Ω–æ broadcast —Å–æ–æ–±—â–µ–Ω–∏–µ:",a,l),a===I.ADD_FRIENDS?(s("‚ûï FriendsPage: –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π —á–µ—Ä–µ–∑ broadcast –Ω–∞–ø—Ä—è–º—É—é"),l.list&&Array.isArray(l.list)?(o(t,l.list,!0),s(`üìä FriendsPage: –û–±–Ω–æ–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ broadcast: ${e(t).length} –¥—Ä—É–∑–µ–π`)):(s("‚ö†Ô∏è FriendsPage: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ broadcast, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —á–µ—Ä–µ–∑ API"),y())):a===I.DELETE_FRIENDS&&(s("‚ûñ FriendsPage: –£–¥–∞–ª—è–µ–º –¥—Ä—É–∑–µ–π —á–µ—Ä–µ–∑ broadcast:",l.ids),o(t,e(t).filter(n=>!l.ids.includes(n.id)),!0))}async function y(){s("üîÑ FriendsPage: –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –¥—Ä—É–∑–µ–π..."),o(u,!0),o(g,null);const i=Date.now();try{M("üìû FriendsPage: –í—ã–∑—ã–≤–∞–µ–º api.friends.getList()...");const n=await k.friends.getList();M("‚úÖ FriendsPage: –ü–æ–ª—É—á–µ–Ω —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π:",n),o(t,n||[],!0),s(`üìä FriendsPage: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ä—É–∑–µ–π: ${e(t).length}`),e(t).length===0?s("üì≠ FriendsPage: –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –ø—É—Å—Ç"):s("üë• FriendsPage: –ò–º–µ–Ω–∞ –¥—Ä—É–∑–µ–π:",e(t).map(p=>p.namePub))}catch(n){D("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥—Ä—É–∑–µ–π:",n),o(g,`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π: ${(n==null?void 0:n.message)||String(n)}`)}const a=Date.now()-i,l=Math.max(0,1e3-a);setTimeout(()=>{o(u,!1),s("üèÅ FriendsPage: –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —á–µ—Ä–µ–∑",a+l,"ms")},l)}async function G(i){if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –¥—Ä—É–≥–∞?"))try{s("üóëÔ∏è FriendsPage: –£–¥–∞–ª—è–µ–º –¥—Ä—É–≥–∞ —Å ID:",i),await k.friends.delete([i]),o(t,e(t).filter(a=>a.id!==i),!0),Fe("‚úÖ FriendsPage: –î—Ä—É–≥ —É–¥–∞–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ")}catch(a){D("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞:",a),o(g,"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞")}}function A(){s("üîÑ FriendsPage: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞"),y()}var _=$e(),H=d(_);Pe(H,{title:"–î–†–£–ó–¨–Ø",subtitle:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º –¥—Ä—É–∑–µ–π",pageName:"FriendsPage",footerVersion:"// FRIENDS_SYSTEM_v2.0 //",footerStatus:"MODE: SVELTE5",children:a=>{be(a,{title:"–°–ò–°–¢–ï–ú–ê –î–†–£–ó–ï–ô",children:n=>{var p=Se(),T=v(d(p),2),N=d(T);fe(N,{get href(){return pe.ADD_FRIEND},className:"action-button primary",children:(r,R)=>{var P=Ee();m(r,P)},$$slots:{default:!0}});var F=v(N,2);F.__click=A;var K=d(F),Q=d(K),x=v(T,2),Z=v(d(x),2),L=d(Z);{var z=r=>{$(r,{type:"error",get message(){return e(g)},actionText:"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É",onAction:A})},J=(r,R)=>{{var P=c=>{$(c,{type:"empty",title:"–°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –ø—É—Å—Ç",message:"–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –¥—Ä—É–≥–∞, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ"})},ne=c=>{var C=De();he(C,21,()=>e(t),b=>b.id,(b,re)=>{_e(b,{get friend(){return e(re)},onDelete:G,onChat:()=>{}})}),m(c,C)};S(r,c=>{e(t).length===0?c(P):c(ne,!1)},R)}};S(L,r=>{e(g)?r(z):r(J,!1)})}var X=v(L,2);{var ee=r=>{$(r,{type:"loading",message:"–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π...",overlay:!0})};S(X,r=>{e(u)&&r(ee)})}var te=v(x,2),se=d(te),ae=d(se);w(()=>{F.disabled=e(u),B(Q,e(u)?"‚ü≥":"üîÑ"),B(ae,`// FRIENDS_SYSTEM_v2.0 // STATUS: ${e(t).length??""} –î–†–£–ó–ï–ô // SVELTE5 //`)}),m(n,p)},$$slots:{default:!0}})},$$slots:{default:!0}}),w(()=>ue(_,1,`theme-${Y()??""}`,"svelte-2ynt41")),m(O,_),ce(),W()}ye(["click"]);export{Le as default};
