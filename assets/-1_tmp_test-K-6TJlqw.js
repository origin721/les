import{p as s,d,a as g}from"./sharedWorker-CyAoOQ0L.js";const I={version:2,name:"tmp_test",description:"–¢–µ—Å—Ç–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è: —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã tmp_test –∏ –ø—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã",fileName:"-1_tmp_test.ts"};function R(e){if(s("üì¶ –í—ã–ø–æ–ª–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏—é —Å—Ö–µ–º—ã tmp_test: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã"),e.objectStoreNames.contains("tmp_test"))s("üìã –¢–∞–±–ª–∏—Ü–∞ tmp_test —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω–¥–µ–∫—Å—ã");else{const i=e.createObjectStore("tmp_test",{keyPath:"id",autoIncrement:!0});i.createIndex("message","message",{unique:!1}),i.createIndex("timestamp","timestamp",{unique:!1}),i.createIndex("type","type",{unique:!1}),d("‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ tmp_test —Å–æ–∑–¥–∞–Ω–æ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏: message, timestamp, type"),s("‚úÖ –¢–∞–±–ª–∏—Ü–∞ tmp_test —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ")}s("‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã tmp_test –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ")}async function q(e){return s("üîÑ –ù–∞—á–∏–Ω–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö tmp_test: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π"),new Promise((i,n)=>{try{const c=e.transaction(["tmp_test"],"readwrite").objectStore("tmp_test"),m=c.count();m.onsuccess=function(){const a=m.result;if(a>0){s(`üìã –í —Ç–∞–±–ª–∏—Ü–µ tmp_test —É–∂–µ –µ—Å—Ç—å ${a} –∑–∞–ø–∏—Å–µ–π, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ`),i();return}const t=[{message:"hi",type:"greeting",timestamp:new Date("2025-01-01T10:00:00"),metadata:{source:"migration",version:1}},{message:"hi",type:"greeting",timestamp:new Date("2025-01-01T11:00:00"),metadata:{source:"migration",version:1,additional:"second record"}},{message:"hi",type:"greeting",timestamp:new Date("2025-01-01T12:00:00"),metadata:{source:"migration",version:1,additional:"third record",special:!0}},{message:"hello world",type:"example",timestamp:new Date,metadata:{source:"migration",description:"–ü—Ä–∏–º–µ—Ä –¥—Ä—É–≥–æ–≥–æ —Ç–∏–ø–∞ –∑–∞–ø–∏—Å–∏"}},{message:"test record",type:"test",timestamp:new Date,metadata:{source:"migration",description:"–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–ø–∏—Å—å –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞"}}];let r=0,l=!1;t.forEach((h,u)=>{const p=c.add(h);p.onsuccess=function(){r++,d(`‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–ø–∏—Å—å ${u+1}: "${h.message}" (ID: ${p.result})`),r===t.length&&!l&&D(c,i,n)},p.onerror=function(){l||(l=!0,g(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ ${u+1}:`,p.error),n(p.error))}})},m.onerror=function(){g("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π:",m.error),n(m.error)}}catch(o){g("‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ migrationData:",o),n(o)}})}function D(e,i,n){s("üéØ –í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏");const o=e.getAll();o.onsuccess=function(){const c=o.result;s(`üìä –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π: ${c.length}`);const a=e.index("message").getAll("hi");a.onsuccess=function(){const t=a.result;s(`üîç –ù–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º "hi": ${t.length}`);const r=e.index("timestamp"),l=new Date,h=new Date(l.getTime()-24*60*60*1e3),u=r.getAll(IDBKeyRange.lowerBound(h));u.onsuccess=function(){const p=u.result;s(`üìÖ –ù–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞: ${p.length}`);const f=e.index("type").count("greeting");f.onsuccess=function(){const y=f.result;s(`üëã –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π: ${y}`),_(c),s("‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö tmp_test –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ"),i()},f.onerror=function(){g("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–¥—Å—á–µ—Ç–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π:",f.error),n(f.error)}},u.onerror=function(){g("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É –≤—Ä–µ–º–µ–Ω–∏:",u.error),n(u.error)}},a.onerror=function(){g("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –∑–∞–ø–∏—Å–µ–π 'hi':",a.error),n(a.error)}},o.onerror=function(){g("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π:",o.error),n(o.error)}}function _(e){var m,a;s("üìö –ü—Ä–∏–º–µ—Ä—ã —Ç–æ–≥–æ, —á—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏:");const i=e.reduce((t,r)=>(t[r.type]=(t[r.type]||0)+1,t),{});d("üè∑Ô∏è  –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º:",i);const n=[...e].sort((t,r)=>new Date(t.timestamp).getTime()-new Date(r.timestamp).getTime());d("‚è∞ –ü–µ—Ä–≤–∞—è –∑–∞–ø–∏—Å—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏:",{message:(m=n[0])==null?void 0:m.message,timestamp:(a=n[0])==null?void 0:a.timestamp});const o=e.filter(t=>{var r;return((r=t.metadata)==null?void 0:r.special)===!0});d("‚≠ê –ó–∞–ø–∏—Å–∏ —Å –æ—Å–æ–±—ã–º–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏:",o.length);const c=e.filter(t=>t.message.toLowerCase().includes("h"));d('üîé –ó–∞–ø–∏—Å–∏ —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –±—É–∫–≤—É "h":',c.length),s("‚ú® –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –î–∞–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.")}export{q as migrationData,I as migrationInfo,R as migrationScheme};
