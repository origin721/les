import{ah as ia,am as Ua,an as za,ao as Ka,ap as qa,aq as Va,ar as Ya,as as ja,at as Ga,au as Wa,Y as U,av as ra,aw as na,ax as Ha,ay as Ja,p as Qa,E as W,a7 as Xa,$ as Za,az as as,a3 as p,a6 as H,aA as va,G as w,B as v,a4 as la,f as T,c as i,y as V,a as $,j as ss,k as es,s as ts,h as is,d as f,L as oa,R as da,D as J,z as S,N as rs,t as ns,x as vs,A as ls,a5 as os}from"./index-a_Q9CJtS.js";import{a as ca}from"./index-359ep7Vq.js";import{B as ds,C as cs}from"./ContentSection-Ctw2npHa.js";const fs=()=>performance.now(),x={tick:s=>requestAnimationFrame(s),now:()=>fs(),tasks:new Set};function ga(){const s=x.now();x.tasks.forEach(a=>{a.c(s)||(x.tasks.delete(a),a.f())}),x.tasks.size!==0&&x.tick(ga)}function us(s){let a;return x.tasks.size===0&&x.tick(ga),{promise:new Promise(t=>{x.tasks.add(a={c:s,f:t})}),abort(){x.tasks.delete(a)}}}function Y(s,a){ja(()=>{s.dispatchEvent(new CustomEvent(a))})}function gs(s){if(s==="float")return"cssFloat";if(s==="offset")return"cssOffset";if(s.startsWith("--"))return s;const a=s.split("-");return a.length===1?a[0]:a[0]+a.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function fa(s){const a={},t=s.split(";");for(const l of t){const[_,n]=l.split(":");if(!_||n===void 0)break;const o=gs(_.trim());a[o]=n.trim()}return a}const _s=s=>s;function ps(s,a,t,l){var _=(s&Ya)!==0,n="both",o,m=a.inert,E=a.style.overflow,u,d;function F(){var r=Ha,g=ia;ra(null),na(null);try{return o??(o=t()(a,(l==null?void 0:l())??{},{direction:n}))}finally{ra(r),na(g)}}var k={is_global:_,in(){a.inert=m,Y(a,"introstart"),u=Q(a,F(),d,1,()=>{Y(a,"introend"),u==null||u.abort(),u=o=void 0,a.style.overflow=E})},out(r){a.inert=!0,Y(a,"outrostart"),d=Q(a,F(),u,0,()=>{Y(a,"outroend"),r==null||r()})},stop:()=>{u==null||u.abort(),d==null||d.abort()}},b=ia;if((b.transitions??(b.transitions=[])).push(k),Ja){var P=_;if(!P){for(var e=b.parent;e&&(e.f&Ua)!==0;)for(;(e=e.parent)&&(e.f&za)===0;);P=!e||(e.f&Ka)!==0}P&&qa(()=>{Va(()=>k.in())})}}function Q(s,a,t,l,_){var n=l===1;if(Ga(a)){var o,m=!1;return Wa(()=>{if(!m){var r=a({direction:n?"in":"out"});o=Q(s,r,t,l,_)}}),{abort:()=>{m=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t==null||t.deactivate(),!(a!=null&&a.duration))return _(),{abort:U,deactivate:U,reset:U,t:()=>l};const{delay:E=0,css:u,tick:d,easing:F=_s}=a;var k=[];if(n&&t===void 0&&(d&&d(0,1),u)){var b=fa(u(0,1));k.push(b,b)}var P=()=>1-l,e=s.animate(k,{duration:E,fill:"forwards"});return e.onfinish=()=>{e.cancel();var r=(t==null?void 0:t.t())??1-l;t==null||t.abort();var g=l-r,c=a.duration*Math.abs(g),N=[];if(c>0){var I=!1;if(u)for(var M=Math.ceil(c/16.666666666666668),L=0;L<=M;L+=1){var z=r+g*F(L/M),K=fa(u(z,1-z));N.push(K),I||(I=K.overflow==="hidden")}I&&(s.style.overflow="hidden"),P=()=>{var R=e.currentTime;return r+g*F(R/c)},d&&us(()=>{if(e.playState!=="running")return!1;var R=P();return d(R,1-R),!0})}e=s.animate(N,{duration:c,fill:"forwards"}),e.onfinish=()=>{P=()=>l,d==null||d(l,1-l),_()}},{abort:()=>{e&&(e.cancel(),e.effect=null,e.onfinish=U)},deactivate:()=>{_=U},reset:()=>{l===0&&(d==null||d(1,0))},t:()=>P()}}const hs=s=>s;function bs(s,{delay:a=0,duration:t=400,easing:l=hs}={}){const _=+getComputedStyle(s).opacity;return{delay:a,duration:t,easing:l,css:n=>`opacity: ${n*_}`}}function ua(s,a){p("üîÑ FriendsPage: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞"),a()}var ms=T('<span class="button-icon svelte-1ug6f4v">üë•</span> <span class="button-text svelte-1ug6f4v">–î–û–ë–ê–í–ò–¢–¨ –î–†–£–ì–ê</span>',1),Fs=T('<div class="error-state svelte-1ug6f4v"><div class="error-icon svelte-1ug6f4v">‚ö†</div> <span class="svelte-1ug6f4v"> </span> <button class="retry-button svelte-1ug6f4v">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É</button></div>'),Ps=T('<div class="empty-state svelte-1ug6f4v"><div class="empty-icon svelte-1ug6f4v">üë•</div> <h3 class="svelte-1ug6f4v">–°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –ø—É—Å—Ç</h3> <p class="svelte-1ug6f4v">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –¥—Ä—É–≥–∞, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ</p> <!></div>'),Es=()=>{},ys=(s,a,t)=>a(v(t).id),ws=T('<div class="friend-card svelte-1ug6f4v"><div class="friend-header svelte-1ug6f4v"><div class="friend-avatar svelte-1ug6f4v"><span class="avatar-text svelte-1ug6f4v"> </span></div> <div class="friend-info svelte-1ug6f4v"><h3 class="friend-name svelte-1ug6f4v"> </h3> <span class="friend-id svelte-1ug6f4v"> </span></div></div> <div class="friend-details svelte-1ug6f4v"><div class="detail-row svelte-1ug6f4v"><span class="detail-label svelte-1ug6f4v">–ê–∫–∫–∞—É–Ω—Ç:</span> <span class="detail-value svelte-1ug6f4v"> </span></div> <div class="detail-row svelte-1ug6f4v"><span class="detail-label svelte-1ug6f4v">P2P –ö–ª—é—á:</span> <span class="detail-value svelte-1ug6f4v"> </span></div></div> <div class="friend-actions svelte-1ug6f4v"><button class="action-btn chat svelte-1ug6f4v"><span class="btn-icon svelte-1ug6f4v">üí¨</span> <span class="btn-text svelte-1ug6f4v">–ß–∞—Ç</span></button> <button class="action-btn delete svelte-1ug6f4v"><span class="btn-icon svelte-1ug6f4v">üóë</span> <span class="btn-text svelte-1ug6f4v">–£–¥–∞–ª–∏—Ç—å</span></button></div></div>'),$s=T('<div class="friends-grid svelte-1ug6f4v"></div>'),xs=T('<div class="loading-overlay svelte-1ug6f4v"><div class="loading-content svelte-1ug6f4v"><div class="loading-animation svelte-1ug6f4v">‚ßó</div> <span class="svelte-1ug6f4v">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π...</span></div></div>'),As=T('<div class="friends-container svelte-1ug6f4v" data-widget-name="FriendsPage"><div class="status-message svelte-1ug6f4v"><div class="status-indicator svelte-1ug6f4v"><span class="status-dot active svelte-1ug6f4v"></span> <span class="status-text svelte-1ug6f4v">OK - –°–ò–°–¢–ï–ú–ê –î–†–£–ó–ï–ô –ê–ö–¢–ò–í–ù–ê</span></div></div> <div class="action-buttons svelte-1ug6f4v"><!> <button class="action-button secondary svelte-1ug6f4v"><span class="button-icon svelte-1ug6f4v"> </span> <span class="button-text svelte-1ug6f4v">–û–ë–ù–û–í–ò–¢–¨</span></button></div> <div class="friends-list svelte-1ug6f4v"><h2 class="section-title svelte-1ug6f4v"><span class="title-icon svelte-1ug6f4v">üìã</span> –°–ü–ò–°–û–ö –î–†–£–ó–ï–ô</h2> <div class="content-container svelte-1ug6f4v"><!> <!></div></div> <div class="footer-status svelte-1ug6f4v"><span class="footer-info svelte-1ug6f4v"> </span></div></div>'),Ds=T("<div><!></div>");function Ns(s,a){Qa(a,!0);const[t,l]=es(),_=()=>is(rs,"$theme",t);let n=W(Xa([])),o=W(!0),m=W(null),E=null;Za(()=>(F(),u(),()=>{E&&(E.close(),E=null)}));function u(){try{E=new BroadcastChannel(as.FRONT_MIDDLEWARE),E.addEventListener("message",d),p("üì° FriendsPage: Broadcast –∫–∞–Ω–∞–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω")}catch(e){H("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ broadcast –∫–∞–Ω–∞–ª–∞:",e)}}function d(e){const{action:r,data:g}=e.data;p("üì¢ FriendsPage: –ü–æ–ª—É—á–µ–Ω–æ broadcast —Å–æ–æ–±—â–µ–Ω–∏–µ:",r,g),r===va.ADD_FRIENDS?(p("‚ûï FriendsPage: –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π —á–µ—Ä–µ–∑ broadcast –Ω–∞–ø—Ä—è–º—É—é"),g.list&&Array.isArray(g.list)?(w(n,g.list,!0),p(`üìä FriendsPage: –û–±–Ω–æ–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ broadcast: ${v(n).length} –¥—Ä—É–∑–µ–π`)):(p("‚ö†Ô∏è FriendsPage: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ broadcast, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —á–µ—Ä–µ–∑ API"),F())):r===va.DELETE_FRIENDS&&(p("‚ûñ FriendsPage: –£–¥–∞–ª—è–µ–º –¥—Ä—É–∑–µ–π —á–µ—Ä–µ–∑ broadcast:",g.ids),w(n,v(n).filter(c=>!g.ids.includes(c.id)),!0))}async function F(){p("üîÑ FriendsPage: –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –¥—Ä—É–∑–µ–π..."),w(o,!0),w(m,null);const e=Date.now();try{la("üìû FriendsPage: –í—ã–∑—ã–≤–∞–µ–º api.friends.getList()...");const c=await ca.friends.getList();la("‚úÖ FriendsPage: –ü–æ–ª—É—á–µ–Ω —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π:",c),w(n,c||[],!0),p(`üìä FriendsPage: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ä—É–∑–µ–π: ${v(n).length}`),v(n).length===0?p("üì≠ FriendsPage: –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –ø—É—Å—Ç"):p("üë• FriendsPage: –ò–º–µ–Ω–∞ –¥—Ä—É–∑–µ–π:",v(n).map(N=>N.namePub))}catch(c){H("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥—Ä—É–∑–µ–π:",c),w(m,`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π: ${(c==null?void 0:c.message)||String(c)}`)}const r=Date.now()-e,g=Math.max(0,1e3-r);setTimeout(()=>{w(o,!1),p("üèÅ FriendsPage: –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —á–µ—Ä–µ–∑",r+g,"ms")},g)}async function k(e){if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –¥—Ä—É–≥–∞?"))try{p("üóëÔ∏è FriendsPage: –£–¥–∞–ª—è–µ–º –¥—Ä—É–≥–∞ —Å ID:",e),await ca.friends.delete([e]),w(n,v(n).filter(r=>r.id!==e),!0),os("‚úÖ FriendsPage: –î—Ä—É–≥ —É–¥–∞–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ")}catch(r){H("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞:",r),w(m,"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞")}}var b=Ds(),P=i(b);ds(P,{title:"–î–†–£–ó–¨–Ø",subtitle:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º –¥—Ä—É–∑–µ–π",pageName:"FriendsPage",footerVersion:"// FRIENDS_SYSTEM_v2.0 //",footerStatus:"MODE: SVELTE5",children:r=>{cs(r,{title:"–°–ò–°–¢–ï–ú–ê –î–†–£–ó–ï–ô",children:c=>{var N=As(),I=f(i(N),2),M=i(I);oa(M,{get href(){return da.ADD_FRIEND},className:"action-button primary",children:(h,A)=>{var C=ms();$(h,C)},$$slots:{default:!0}});var L=f(M,2);L.__click=[ua,F];var z=i(L),K=i(z),R=f(I,2),_a=f(i(R),2),X=i(_a);{var pa=h=>{var A=Fs(),C=f(i(A),2),j=i(C),D=f(C,2);D.__click=[ua,F],V(()=>S(j,v(m))),$(h,A)},ha=(h,A)=>{{var C=D=>{var B=Ps(),O=f(i(B),6);oa(O,{get href(){return da.ADD_FRIEND},className:"empty-action-button",children:(y,G)=>{var q=ns("–î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞");$(y,q)},$$slots:{default:!0}}),$(D,B)},j=D=>{var B=$s();vs(B,21,()=>v(n),O=>O.id,(O,y)=>{var G=ws(),q=i(G),Z=i(q),ya=i(Z),wa=i(ya),$a=f(Z,2),aa=i($a),xa=i(aa),Aa=f(aa,2),Da=i(Aa),sa=f(q,2),ea=i(sa),Sa=f(i(ea),2),Ta=i(Sa),ka=f(ea,2),Na=f(i(ka),2),La=i(Na),Ra=f(sa,2),ta=i(Ra);ta.__click=[Es];var Ca=f(ta,2);Ca.__click=[ys,k,y],V((Ia,Ma,Ba,Oa)=>{S(wa,Ia),S(xa,v(y).namePub),S(Da,`ID: ${Ma??""}...`),S(Ta,`${Ba??""}...`),S(La,Oa)},[()=>v(y).namePub.charAt(0).toUpperCase(),()=>v(y).id.slice(0,8),()=>v(y).myAccId.slice(0,8),()=>v(y).friendPubKeyLibp2p?v(y).friendPubKeyLibp2p.slice(0,16)+"...":"–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"]),$(O,G)}),$(D,B)};J(h,D=>{v(n).length===0?D(C):D(j,!1)},A)}};J(X,h=>{v(m)?h(pa):h(ha,!1)})}var ba=f(X,2);{var ma=h=>{var A=xs();ps(3,A,()=>bs,()=>({duration:300})),$(h,A)};J(ba,h=>{v(o)&&h(ma)})}var Fa=f(R,2),Pa=i(Fa),Ea=i(Pa);V(()=>{L.disabled=v(o),S(K,v(o)?"‚ü≥":"üîÑ"),S(Ea,`// FRIENDS_SYSTEM_v2.0 // STATUS: ${v(n).length??""} –î–†–£–ó–ï–ô // SVELTE5 //`)}),$(c,N)},$$slots:{default:!0}})},$$slots:{default:!0}}),V(()=>ts(b,1,`theme-${_()??""}`,"svelte-1ug6f4v")),$(s,b),ss(),l()}ls(["click"]);export{Ns as default};
