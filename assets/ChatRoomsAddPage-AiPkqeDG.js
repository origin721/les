import{C as q,a3 as K,x as E,p as V,f as M,j as a,a4 as ee,U as se,b as v,R as y,a5 as te,E as I,g as _,d as re,s as d,B as P,t as h,X as ae,z as oe,L as ne,Z as ie,a as de,h as le,i as me,y as ce,r as S,G as T,a6 as ve,a1 as _e,Q as ue,a7 as pe,a8 as fe}from"./index-BnSUTard.js";import{I as ge}from"./Input-BmpiKCJj.js";import{A as xe}from"./AnimatedTitle-BroSf0Q3.js";import{P as be}from"./PageFooter-B42C399l.js";import{s as ye}from"./search_params_to_string-BbrIB6Pr.js";const he=$e();function $e(){const i=q(we());function p(r){const s=E();return i.update(e=>{const o={...e.rooms,[s]:{name:r.name,room_id:s,messages:{}}};return{...e,rooms:o}}),{roomId:s}}const u=r=>{const s=E();i.update(e=>({...e,rooms:{...e.rooms,[r.roomId]:{...e.rooms[r.roomId],messages:{...e.rooms[r.roomId].messages,[s]:{text:r.message,created_date:new Date}}}}}))};function f(r){i.update(s=>{try{let e={...s,my_ids_for_server:s.my_ids_for_server||{}};return e.my_ids_for_server={...e.my_ids_for_server},delete e.my_ids_for_server[r.user_id],e}catch(e){return console.error(import.meta.url,e),s}})}function l(r){i.update(s=>{try{let e={...s,my_ids_for_server:s.my_ids_for_server||{}};return e.my_ids_for_server={...e.my_ids_for_server,[r.user_id]:r.user_id},e}catch(e){return console.error(import.meta.url,e),s}})}return{subscribe:i.subscribe,add_message:u,add_room:p,get_room_by_id:r=>Object.values(K(i).rooms).find(s=>s.room_id===r)||null,registration_by_id:l,delete_registration_by_id:f}}function we(){return{rooms:{},my_ids_for_server:{}}}var ke=M('<span class="text-lg">‚Üê</span> –ù–ê–ó–ê–î –ö –ß–ê–¢–ê–ú',1),Re=M('<div class="add-room-container svelte-1mq8esq" data-widget-name="ChatRoomsAddPage"><header class="add-room-header svelte-1mq8esq"><!> <div class="z-10"><!></div></header> <main class="add-room-content svelte-1mq8esq"><div class="max-w-2xl mx-auto"><div class="mb-8"><!></div> <div class="bg-[var(--les-bg-secondary)] border border-[var(--les-border-primary)] rounded-lg p-8 shadow-lg shadow-[var(--les-accent-primary)]/10"><div class="mb-6"><h2 class="text-2xl font-mono uppercase tracking-wider text-[var(--les-text-primary)] mb-2">üí¨ –ù–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞</h2> <p class="text-[var(--les-text-secondary)] font-mono text-sm">–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∫–æ–º–Ω–∞—Ç—É –¥–ª—è –æ–±—â–µ–Ω–∏—è</p></div> <form class="space-y-6"><div class="space-y-2"><label for="room-name" class="block text-sm font-mono uppercase tracking-wider text-[var(--les-text-primary)]">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã *</label> <!> <p class="text-xs text-[var(--les-text-secondary)] font-mono">–í–≤–µ–¥–∏—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–π –∫–æ–º–Ω–∞—Ç—ã</p></div> <div class="bg-[var(--les-bg-primary)] border border-[var(--les-border-secondary)] rounded-lg p-4"><h3 class="text-sm font-mono uppercase tracking-wider text-[var(--les-accent-primary)] mb-3">üîí –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–Ω–∞—Ç—ã</h3> <ul class="space-y-2 text-xs font-mono text-[var(--les-text-secondary)]"><li class="flex items-center gap-2"><span class="text-[var(--les-accent-primary)]">‚Ä¢</span> End-to-End —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π</li> <li class="flex items-center gap-2"><span class="text-[var(--les-accent-primary)]">‚Ä¢</span> P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–æ–≤</li> <li class="flex items-center gap-2"><span class="text-[var(--les-accent-primary)]">‚Ä¢</span> –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏</li> <li class="flex items-center gap-2"><span class="text-[var(--les-accent-primary)]">‚Ä¢</span> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏</li></ul></div> <div class="flex gap-4 justify-end pt-4"><div class="min-w-[7.5rem]"><!></div> <div class="min-w-[7.5rem] create-button svelte-1mq8esq"><!></div></div></form></div> <div class="mt-8 bg-[var(--les-bg-warning)] border border-[var(--les-border-warning)] rounded-lg p-4"><div class="flex items-start gap-3"><span class="text-[var(--les-accent-warning)] text-lg mt-1">‚ö†Ô∏è</span> <div><h4 class="text-sm font-mono uppercase tracking-wider text-[var(--les-text-primary)] mb-1">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h4> <p class="text-xs font-mono text-[var(--les-text-secondary)]">–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–º–Ω–∞—Ç–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –¥–æ–≤–µ—Ä—è–µ—Ç–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –∫–æ–º–Ω–∞—Ç—ã.</p></div></div></div></div></main> <!></div>');function Pe(i,p){V(p,!0);const[u,f]=ce(),l=()=>I(e,"$name_field",u),r=()=>I(ue,"$theme",u),s="no name";let e=q(""),o=re(!1);function g(){var t;if(!(_(o)||!((t=l())!=null&&t.trim()))){S(o,!0);try{const n=he.add_room({name:l().trim()||s});T.setPath(`${y.CHAT_ROOMS}?${ye({[ve.ROOM_ID]:n.roomId})}`)}catch(n){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–Ω–∞—Ç—ã:",n),S(o,!1)}}}function j(){T.setPath(y.CHAT_ROOMS)}var x=Re(),$=a(x),w=a($);xe(w,{title:"CREATE_NEW_CHAT_ROOM",subtitle:"–°–û–ó–î–ê–ù–ò–ï_–ù–û–í–û–ô_–ö–û–ú–ù–ê–¢–´",statusText:"–°–ò–°–¢–ï–ú–ê –ê–ö–¢–ò–í–ù–ê",className:"add-room-title"});var H=d(w,2),N=a(H);ee(N);var k=d($,2),U=a(k),R=a(U),z=a(R);se(z,{get href(){return y.CHAT_ROOMS},className:"inline-flex items-center gap-2 text-[var(--les-accent-primary)] hover:text-[var(--les-accent-secondary)] transition-colors duration-200 text-sm font-mono uppercase tracking-wider",children:(t,n)=>{var m=ke();v(t,m)},$$slots:{default:!0}});var B=d(R,2),O=d(a(B),2),A=a(O),D=d(a(A),2);ge(D,{id:"room-name",placeholder:s,get disabled(){return _(o)},onkeydown:t=>t.key==="Enter"&&g(),get value(){return pe(),l()},set value(t){te(e,t)}});var L=d(A,4),C=a(L),Q=a(C);P(Q,{onclick:j,variant:"ghost",get disabled(){return _(o)},children:(t,n)=>{var m=h("–û—Ç–º–µ–Ω–∞");v(t,m)},$$slots:{default:!0}});var F=d(C,2),G=a(F);const W=ie(()=>{var t;return _(o)||!((t=l())!=null&&t.trim())});P(G,{onclick:g,get disabled(){return _(W)},children:(t,n)=>{var m=ae(),Y=oe(m);{var Z=c=>{var b=h("–°–æ–∑–¥–∞–Ω–∏–µ...");v(c,b)},J=c=>{var b=h("üöÄ –°–æ–∑–¥–∞—Ç—å");v(c,b)};ne(Y,c=>{_(o)?c(Z):c(J,!1)})}v(t,m)},$$slots:{default:!0}});var X=d(k,2);be(X,{}),de(()=>_e(x,"data-theme",r())),le("submit",O,function(...t){var n;(n=fe)==null||n.apply(this,t)}),v(i,x),me(),f()}export{Pe as default};
