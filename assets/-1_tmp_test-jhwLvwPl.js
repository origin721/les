import{p as s,d,a as g}from"./sharedWorker-CySx-o9k.js";const I={version:2,name:"tmp_test",description:"–¢–µ—Å—Ç–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è: —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã tmp_test –∏ –ø—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã",fileName:"-1_tmp_test.ts"};function R(t){if(s("üì¶ –í—ã–ø–æ–ª–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏—é —Å—Ö–µ–º—ã tmp_test: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã"),t.objectStoreNames.contains("tmp_test"))s("üìã –¢–∞–±–ª–∏—Ü–∞ tmp_test —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω–¥–µ–∫—Å—ã");else{const i=t.createObjectStore("tmp_test",{keyPath:"id",autoIncrement:!0});i.createIndex("message","message",{unique:!1}),i.createIndex("timestamp","timestamp",{unique:!1}),i.createIndex("type","type",{unique:!1}),d("‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ tmp_test —Å–æ–∑–¥–∞–Ω–æ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏: message, timestamp, type"),s("‚úÖ –¢–∞–±–ª–∏—Ü–∞ tmp_test —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ")}s("‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã tmp_test –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ")}async function $(t){const{db:i,currentUser:m}=t;return s(`üîÑ –í—ã–ø–æ–ª–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö tmp_test –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${m.id}`),new Promise((a,c)=>{try{const n=i.transaction(["tmp_test"],"readwrite").objectStore("tmp_test"),e=n.count();e.onsuccess=function(){const r=e.result;if(r>0){s(`üìã –í —Ç–∞–±–ª–∏—Ü–µ tmp_test —É–∂–µ –µ—Å—Ç—å ${r} –∑–∞–ø–∏—Å–µ–π, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ`),a();return}const l=[{message:"hi",type:"greeting",timestamp:new Date("2025-01-01T10:00:00"),metadata:{source:"migration",version:1}},{message:"hi",type:"greeting",timestamp:new Date("2025-01-01T11:00:00"),metadata:{source:"migration",version:1,additional:"second record"}},{message:"hi",type:"greeting",timestamp:new Date("2025-01-01T12:00:00"),metadata:{source:"migration",version:1,additional:"third record",special:!0}},{message:"hello world",type:"example",timestamp:new Date,metadata:{source:"migration",description:"–ü—Ä–∏–º–µ—Ä –¥—Ä—É–≥–æ–≥–æ —Ç–∏–ø–∞ –∑–∞–ø–∏—Å–∏"}},{message:"test record",type:"test",timestamp:new Date,metadata:{source:"migration",description:"–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–ø–∏—Å—å –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞"}}];let f=0,u=!1;l.forEach((h,y)=>{const o=n.add(h);o.onsuccess=function(){f++,d(`‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–ø–∏—Å—å ${y+1}: "${h.message}" (ID: ${o.result})`),f===l.length&&!u&&_(n,a,c)},o.onerror=function(){u||(u=!0,g(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ ${y+1}:`,o.error),c(o.error))}})},e.onerror=function(){g("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π:",e.error),c(e.error)}}catch(p){g("‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ migrationData:",p),c(p)}})}function _(t,i,m){s("üéØ –í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏");const a=t.getAll();a.onsuccess=function(){const c=a.result;s(`üìä –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π: ${c.length}`);const n=t.index("message").getAll("hi");n.onsuccess=function(){const e=n.result;s(`üîç –ù–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º "hi": ${e.length}`);const r=t.index("timestamp"),l=new Date,f=new Date(l.getTime()-24*60*60*1e3),u=r.getAll(IDBKeyRange.lowerBound(f));u.onsuccess=function(){const h=u.result;s(`üìÖ –ù–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞: ${h.length}`);const o=t.index("type").count("greeting");o.onsuccess=function(){const D=o.result;s(`üëã –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π: ${D}`),w(c),s("‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö tmp_test –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ"),i()},o.onerror=function(){g("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–¥—Å—á–µ—Ç–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π:",o.error),m(o.error)}},u.onerror=function(){g("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É –≤—Ä–µ–º–µ–Ω–∏:",u.error),m(u.error)}},n.onerror=function(){g("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –∑–∞–ø–∏—Å–µ–π 'hi':",n.error),m(n.error)}},a.onerror=function(){g("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π:",a.error),m(a.error)}}function w(t){var p,n;s("üìö –ü—Ä–∏–º–µ—Ä—ã —Ç–æ–≥–æ, —á—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏:");const i=t.reduce((e,r)=>(e[r.type]=(e[r.type]||0)+1,e),{});d("üè∑Ô∏è  –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º:",i);const m=[...t].sort((e,r)=>new Date(e.timestamp).getTime()-new Date(r.timestamp).getTime());d("‚è∞ –ü–µ—Ä–≤–∞—è –∑–∞–ø–∏—Å—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏:",{message:(p=m[0])==null?void 0:p.message,timestamp:(n=m[0])==null?void 0:n.timestamp});const a=t.filter(e=>{var r;return((r=e.metadata)==null?void 0:r.special)===!0});d("‚≠ê –ó–∞–ø–∏—Å–∏ —Å –æ—Å–æ–±—ã–º–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏:",a.length);const c=t.filter(e=>e.message.toLowerCase().includes("h"));d('üîé –ó–∞–ø–∏—Å–∏ —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –±—É–∫–≤—É "h":',c.length),s("‚ú® –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –î–∞–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.")}export{$ as migrationData,I as migrationInfo,R as migrationScheme};
