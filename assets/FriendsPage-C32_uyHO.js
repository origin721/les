import{d as oe,k as E,M as le,a1 as ce,aj as ve,ak as s,al as S,am as C,j as l,l as e,an as M,f as m,c as o,t as w,a as p,g as ge,h as ue,b as fe,r as he,m as v,L as pe,R as me,I as D,C as B,ao as y,H as be,y as _e,U as Fe,ap as Pe,aq as ke}from"./index-BwjGawjf.js";import{S as Ee}from"./StatusIndicator-DB3rxNLb.js";import{B as Se}from"./BasePage-BBFXJpTo.js";import{C as De}from"./ContentSection-D8cMbai8.js";import{s as O}from"./index-DQ9z8GWt.js";var ye=m('<span class="button-icon svelte-1hk6nbd">üë•</span> <span class="button-text svelte-1hk6nbd">–î–û–ë–ê–í–ò–¢–¨ –î–†–£–ì–ê</span>',1),$e=m('<div class="friends-grid svelte-1hk6nbd"></div>'),Ae=m('<div class="friends-container svelte-1hk6nbd" data-widget-name="FriendsPage"><div class="status-message svelte-1hk6nbd"><!></div> <div class="action-buttons svelte-1hk6nbd"><!> <button class="action-button secondary svelte-1hk6nbd"><span class="button-icon svelte-1hk6nbd"> </span> <span class="button-text svelte-1hk6nbd">–û–ë–ù–û–í–ò–¢–¨</span></button></div> <div class="friends-list svelte-1hk6nbd"><h2 class="section-title svelte-1hk6nbd"><span class="title-icon svelte-1hk6nbd">üìã</span> –°–ü–ò–°–û–ö –î–†–£–ó–ï–ô</h2> <div class="content-container svelte-1hk6nbd"><!> <!></div></div> <div class="footer-status svelte-1hk6nbd"><span class="footer-info svelte-1hk6nbd"> </span></div></div>'),Te=m("<div><!></div>");function Ce(U,V){oe(V,!0);const[j,H]=ue(),W=()=>he(be,"$theme",j);let a=E(le([])),g=E(!0),u=E(null),f=null;ce(()=>(b(),Y(),()=>{f&&(f.close(),f=null)}));function Y(){try{f=new BroadcastChannel(ve.FRONT_MIDDLEWARE),f.addEventListener("message",q),s("üì° FriendsPage: Broadcast –∫–∞–Ω–∞–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω")}catch(i){S("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ broadcast –∫–∞–Ω–∞–ª–∞:",i)}}function q(i){const{action:t,data:d}=i.data;s("üì¢ FriendsPage: –ü–æ–ª—É—á–µ–Ω–æ broadcast —Å–æ–æ–±—â–µ–Ω–∏–µ:",t,d),t===C.ADD_FRIENDS?(s("‚ûï FriendsPage: –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π —á–µ—Ä–µ–∑ broadcast –Ω–∞–ø—Ä—è–º—É—é"),d.list&&Array.isArray(d.list)?(l(a,d.list,!0),s(`üìä FriendsPage: –û–±–Ω–æ–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ broadcast: ${e(a).length} –¥—Ä—É–∑–µ–π`)):(s("‚ö†Ô∏è FriendsPage: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ broadcast, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —á–µ—Ä–µ–∑ API"),b())):t===C.DELETE_FRIENDS&&(s("‚ûñ FriendsPage: –£–¥–∞–ª—è–µ–º –¥—Ä—É–∑–µ–π —á–µ—Ä–µ–∑ broadcast:",d.ids),l(a,e(a).filter(n=>!d.ids.includes(n.id)),!0))}async function b(){s("üîÑ FriendsPage: –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –¥—Ä—É–∑–µ–π..."),l(g,!0),l(u,null);const i=Date.now();try{M("üìû FriendsPage: –í—ã–∑—ã–≤–∞–µ–º api.friends.getList()...");const n=await O.friends.getList();M("‚úÖ FriendsPage: –ü–æ–ª—É—á–µ–Ω —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π:",n),l(a,n||[],!0),s(`üìä FriendsPage: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ä—É–∑–µ–π: ${e(a).length}`),e(a).length===0?s("üì≠ FriendsPage: –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –ø—É—Å—Ç"):s("üë• FriendsPage: –ò–º–µ–Ω–∞ –¥—Ä—É–∑–µ–π:",e(a).map(h=>h.namePub))}catch(n){S("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥—Ä—É–∑–µ–π:",n),l(u,`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π: ${(n==null?void 0:n.message)||String(n)}`)}const t=Date.now()-i,d=Math.max(0,1e3-t);setTimeout(()=>{l(g,!1),s("üèÅ FriendsPage: –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —á–µ—Ä–µ–∑",t+d,"ms")},d)}async function z(i){if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –¥—Ä—É–≥–∞?"))try{s("üóëÔ∏è FriendsPage: –£–¥–∞–ª—è–µ–º –¥—Ä—É–≥–∞ —Å ID:",i),await O.friends.delete([i]),l(a,e(a).filter(t=>t.id!==i),!0),ke("‚úÖ FriendsPage: –î—Ä—É–≥ —É–¥–∞–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ")}catch(t){S("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞:",t),l(u,"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞")}}function $(){s("üîÑ FriendsPage: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞"),b()}var _=Te(),K=o(_);Se(K,{title:"–î–†–£–ó–¨–Ø",subtitle:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º –¥—Ä—É–∑–µ–π",pageName:"FriendsPage",footerVersion:"// FRIENDS_SYSTEM_v2.0 //",footerStatus:"MODE: SVELTE5",children:t=>{De(t,{title:"–°–ò–°–¢–ï–ú–ê –î–†–£–ó–ï–ô",children:n=>{var h=Ae(),A=o(h),G=o(A);Ee(G,{status:"active",text:"OK - –°–ò–°–¢–ï–ú–ê –î–†–£–ó–ï–ô –ê–ö–¢–ò–í–ù–ê",size:"lg"});var T=v(A,2),L=o(T);pe(L,{get href(){return me.ADD_FRIEND},className:"action-button primary",children:(r,I)=>{var P=ye();p(r,P)},$$slots:{default:!0}});var F=v(L,2);F.__click=$;var J=o(F),Q=o(J),N=v(T,2),X=v(o(N),2),x=o(X);{var Z=r=>{y(r,{type:"error",get message(){return e(u)},actionText:"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É",onAction:$})},ee=(r,I)=>{{var P=c=>{y(c,{type:"empty",title:"–°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –ø—É—Å—Ç",message:"–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –¥—Ä—É–≥–∞, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ"})},ie=c=>{var R=$e();_e(R,21,()=>e(a),k=>k.id,(k,de)=>{Pe(k,{get friend(){return e(de)},onDelete:z,onChat:()=>{}})}),p(c,R)};D(r,c=>{e(a).length===0?c(P):c(ie,!1)},I)}};D(x,r=>{e(u)?r(Z):r(ee,!1)})}var ae=v(x,2);{var se=r=>{y(r,{type:"loading",message:"–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π...",overlay:!0})};D(ae,r=>{e(g)&&r(se)})}var te=v(N,2),ne=o(te),re=o(ne);w(()=>{F.disabled=e(g),B(Q,e(g)?"‚ü≥":"üîÑ"),B(re,`// FRIENDS_SYSTEM_v2.0 // STATUS: ${e(a).length??""} –î–†–£–ó–ï–ô // SVELTE5 //`)}),p(n,h)},$$slots:{default:!0}})},$$slots:{default:!0}}),w(()=>fe(_,1,`theme-${W()??""}`,"svelte-1hk6nbd")),p(U,_),ge(),H()}Fe(["click"]);export{Ce as default};
