import{a3 as ea,a8 as Ma,a9 as Ba,aa as Oa,ab as Ka,ac as Ua,ad as Va,ae as ja,af as za,ag as qa,ah as O,ai as ta,aj as ia,ak as Wa,al as Ya,p as Ga,D as Y,V as Ha,P as Ja,am as Qa,an as ra,E as y,A as v,f as k,c as i,x as j,b as w,k as Xa,l as Za,s as as,j as ss,e as f,L as na,R as va,C as G,y as S,M as es,t as ts,u as is,z as rs}from"./index-B1MJr76t.js";import{a as oa}from"./index-C1rOMx5S.js";import{B as ns,C as vs}from"./ContentSection-DFLcGUAB.js";const os=()=>performance.now(),$={tick:s=>requestAnimationFrame(s),now:()=>os(),tasks:new Set};function da(){const s=$.now();$.tasks.forEach(a=>{a.c(s)||($.tasks.delete(a),a.f())}),$.tasks.size!==0&&$.tick(da)}function ls(s){let a;return $.tasks.size===0&&$.tick(da),{promise:new Promise(t=>{$.tasks.add(a={c:s,f:t})}),abort(){$.tasks.delete(a)}}}function z(s,a){ja(()=>{s.dispatchEvent(new CustomEvent(a))})}function cs(s){if(s==="float")return"cssFloat";if(s==="offset")return"cssOffset";if(s.startsWith("--"))return s;const a=s.split("-");return a.length===1?a[0]:a[0]+a.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function la(s){const a={},t=s.split(";");for(const o of t){const[_,n]=o.split(":");if(!_||n===void 0)break;const l=cs(_.trim());a[l]=n.trim()}return a}const ds=s=>s;function fs(s,a,t,o){var _=(s&Va)!==0,n="both",l,b=a.inert,P=a.style.overflow,u,c;function m(){var r=Wa,g=ea;ta(null),ia(null);try{return l??(l=t()(a,(o==null?void 0:o())??{},{direction:n}))}finally{ta(r),ia(g)}}var A={is_global:_,in(){a.inert=b,z(a,"introstart"),u=H(a,m(),c,1,()=>{z(a,"introend"),u==null||u.abort(),u=l=void 0,a.style.overflow=P})},out(r){a.inert=!0,z(a,"outrostart"),c=H(a,m(),u,0,()=>{z(a,"outroend"),r==null||r()})},stop:()=>{u==null||u.abort(),c==null||c.abort()}},h=ea;if((h.transitions??(h.transitions=[])).push(A),Ya){var F=_;if(!F){for(var e=h.parent;e&&(e.f&Ma)!==0;)for(;(e=e.parent)&&(e.f&Ba)===0;);F=!e||(e.f&Oa)!==0}F&&Ka(()=>{Ua(()=>A.in())})}}function H(s,a,t,o,_){var n=o===1;if(za(a)){var l,b=!1;return qa(()=>{if(!b){var r=a({direction:n?"in":"out"});l=H(s,r,t,o,_)}}),{abort:()=>{b=!0,l==null||l.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(t==null||t.deactivate(),!(a!=null&&a.duration))return _(),{abort:O,deactivate:O,reset:O,t:()=>o};const{delay:P=0,css:u,tick:c,easing:m=ds}=a;var A=[];if(n&&t===void 0&&(c&&c(0,1),u)){var h=la(u(0,1));A.push(h,h)}var F=()=>1-o,e=s.animate(A,{duration:P,fill:"forwards"});return e.onfinish=()=>{e.cancel();var r=(t==null?void 0:t.t())??1-o;t==null||t.abort();var g=o-r,d=a.duration*Math.abs(g),T=[];if(d>0){var R=!1;if(u)for(var I=Math.ceil(d/16.666666666666668),N=0;N<=I;N+=1){var K=r+g*m(N/I),U=la(u(K,1-K));T.push(U),R||(R=U.overflow==="hidden")}R&&(s.style.overflow="hidden"),F=()=>{var L=e.currentTime;return r+g*m(L/d)},c&&ls(()=>{if(e.playState!=="running")return!1;var L=F();return c(L,1-L),!0})}e=s.animate(T,{duration:d,fill:"forwards"}),e.onfinish=()=>{F=()=>o,c==null||c(o,1-o),_()}},{abort:()=>{e&&(e.cancel(),e.effect=null,e.onfinish=O)},deactivate:()=>{_=O},reset:()=>{o===0&&(c==null||c(1,0))},t:()=>F()}}const us=s=>s;function gs(s,{delay:a=0,duration:t=400,easing:o=us}={}){const _=+getComputedStyle(s).opacity;return{delay:a,duration:t,easing:o,css:n=>`opacity: ${n*_}`}}function ca(s,a){console.log("üîÑ FriendsPage: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞"),a()}var _s=k('<span class="button-icon svelte-1ug6f4v">üë•</span> <span class="button-text svelte-1ug6f4v">–î–û–ë–ê–í–ò–¢–¨ –î–†–£–ì–ê</span>',1),ps=k('<div class="error-state svelte-1ug6f4v"><div class="error-icon svelte-1ug6f4v">‚ö†</div> <span class="svelte-1ug6f4v"> </span> <button class="retry-button svelte-1ug6f4v">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É</button></div>'),hs=k('<div class="empty-state svelte-1ug6f4v"><div class="empty-icon svelte-1ug6f4v">üë•</div> <h3 class="svelte-1ug6f4v">–°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –ø—É—Å—Ç</h3> <p class="svelte-1ug6f4v">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –¥—Ä—É–≥–∞, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ</p> <!></div>'),bs=()=>{},ms=(s,a,t)=>a(v(t).id),Fs=k('<div class="friend-card svelte-1ug6f4v"><div class="friend-header svelte-1ug6f4v"><div class="friend-avatar svelte-1ug6f4v"><span class="avatar-text svelte-1ug6f4v"> </span></div> <div class="friend-info svelte-1ug6f4v"><h3 class="friend-name svelte-1ug6f4v"> </h3> <span class="friend-id svelte-1ug6f4v"> </span></div></div> <div class="friend-details svelte-1ug6f4v"><div class="detail-row svelte-1ug6f4v"><span class="detail-label svelte-1ug6f4v">–ê–∫–∫–∞—É–Ω—Ç:</span> <span class="detail-value svelte-1ug6f4v"> </span></div> <div class="detail-row svelte-1ug6f4v"><span class="detail-label svelte-1ug6f4v">P2P –ö–ª—é—á:</span> <span class="detail-value svelte-1ug6f4v"> </span></div></div> <div class="friend-actions svelte-1ug6f4v"><button class="action-btn chat svelte-1ug6f4v"><span class="btn-icon svelte-1ug6f4v">üí¨</span> <span class="btn-text svelte-1ug6f4v">–ß–∞—Ç</span></button> <button class="action-btn delete svelte-1ug6f4v"><span class="btn-icon svelte-1ug6f4v">üóë</span> <span class="btn-text svelte-1ug6f4v">–£–¥–∞–ª–∏—Ç—å</span></button></div></div>'),Ps=k('<div class="friends-grid svelte-1ug6f4v"></div>'),Es=k('<div class="loading-overlay svelte-1ug6f4v"><div class="loading-content svelte-1ug6f4v"><div class="loading-animation svelte-1ug6f4v">‚ßó</div> <span class="svelte-1ug6f4v">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π...</span></div></div>'),ys=k('<div class="friends-container svelte-1ug6f4v" data-widget-name="FriendsPage"><div class="status-message svelte-1ug6f4v"><div class="status-indicator svelte-1ug6f4v"><span class="status-dot active svelte-1ug6f4v"></span> <span class="status-text svelte-1ug6f4v">OK - –°–ò–°–¢–ï–ú–ê –î–†–£–ó–ï–ô –ê–ö–¢–ò–í–ù–ê</span></div></div> <div class="action-buttons svelte-1ug6f4v"><!> <button class="action-button secondary svelte-1ug6f4v"><span class="button-icon svelte-1ug6f4v"> </span> <span class="button-text svelte-1ug6f4v">–û–ë–ù–û–í–ò–¢–¨</span></button></div> <div class="friends-list svelte-1ug6f4v"><h2 class="section-title svelte-1ug6f4v"><span class="title-icon svelte-1ug6f4v">üìã</span> –°–ü–ò–°–û–ö –î–†–£–ó–ï–ô</h2> <div class="content-container svelte-1ug6f4v"><!> <!></div></div> <div class="footer-status svelte-1ug6f4v"><span class="footer-info svelte-1ug6f4v"> </span></div></div>'),ws=k("<div><!></div>");function Ss(s,a){Ga(a,!0);const[t,o]=Za(),_=()=>ss(es,"$theme",t);let n=Y(Ha([])),l=Y(!0),b=Y(null),P=null;Ja(()=>(m(),u(),()=>{P&&(P.close(),P=null)}));function u(){try{P=new BroadcastChannel(Qa.FRONT_MIDDLEWARE),P.addEventListener("message",c),console.log("üì° FriendsPage: Broadcast –∫–∞–Ω–∞–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω")}catch(e){console.error("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ broadcast –∫–∞–Ω–∞–ª–∞:",e)}}function c(e){const{action:r,data:g}=e.data;console.log("üì¢ FriendsPage: –ü–æ–ª—É—á–µ–Ω–æ broadcast —Å–æ–æ–±—â–µ–Ω–∏–µ:",r,g),r===ra.ADD_FRIENDS?(console.log("‚ûï FriendsPage: –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π —á–µ—Ä–µ–∑ broadcast –Ω–∞–ø—Ä—è–º—É—é"),g.list&&Array.isArray(g.list)?(y(n,g.list,!0),console.log(`üìä FriendsPage: –û–±–Ω–æ–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ broadcast: ${v(n).length} –¥—Ä—É–∑–µ–π`)):(console.log("‚ö†Ô∏è FriendsPage: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ broadcast, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —á–µ—Ä–µ–∑ API"),m())):r===ra.DELETE_FRIENDS&&(console.log("‚ûñ FriendsPage: –£–¥–∞–ª—è–µ–º –¥—Ä—É–∑–µ–π —á–µ—Ä–µ–∑ broadcast:",g.ids),y(n,v(n).filter(d=>!g.ids.includes(d.id)),!0))}async function m(){console.log("üîÑ FriendsPage: –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –¥—Ä—É–∑–µ–π..."),y(l,!0),y(b,null);const e=Date.now();try{console.log("üìû FriendsPage: –í—ã–∑—ã–≤–∞–µ–º api.friends.getList()...");const d=await oa.friends.getList();console.log("‚úÖ FriendsPage: –ü–æ–ª—É—á–µ–Ω —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π:",d),y(n,d||[],!0),console.log(`üìä FriendsPage: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ä—É–∑–µ–π: ${v(n).length}`),v(n).length===0?console.log("üì≠ FriendsPage: –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –ø—É—Å—Ç"):console.log("üë• FriendsPage: –ò–º–µ–Ω–∞ –¥—Ä—É–∑–µ–π:",v(n).map(T=>T.namePub))}catch(d){console.error("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥—Ä—É–∑–µ–π:",d),y(b,`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π: ${(d==null?void 0:d.message)||String(d)}`)}const r=Date.now()-e,g=Math.max(0,1e3-r);setTimeout(()=>{y(l,!1),console.log("üèÅ FriendsPage: –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —á–µ—Ä–µ–∑",r+g,"ms")},g)}async function A(e){if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –¥—Ä—É–≥–∞?"))try{console.log("üóëÔ∏è FriendsPage: –£–¥–∞–ª—è–µ–º –¥—Ä—É–≥–∞ —Å ID:",e),await oa.friends.delete([e]),y(n,v(n).filter(r=>r.id!==e),!0),console.log("‚úÖ FriendsPage: –î—Ä—É–≥ —É–¥–∞–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ")}catch(r){console.error("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞:",r),y(b,"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞")}}var h=ws(),F=i(h);ns(F,{title:"–î–†–£–ó–¨–Ø",subtitle:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º –¥—Ä—É–∑–µ–π",pageName:"FriendsPage",footerVersion:"// FRIENDS_SYSTEM_v2.0 //",footerStatus:"MODE: SVELTE5",children:r=>{vs(r,{title:"–°–ò–°–¢–ï–ú–ê –î–†–£–ó–ï–ô",children:d=>{var T=ys(),R=f(i(T),2),I=i(R);na(I,{get href(){return va.ADD_FRIEND},className:"action-button primary",children:(p,x)=>{var C=_s();w(p,C)},$$slots:{default:!0}});var N=f(I,2);N.__click=[ca,m];var K=i(N),U=i(K),L=f(R,2),fa=f(i(L),2),J=i(fa);{var ua=p=>{var x=ps(),C=f(i(x),2),q=i(C),D=f(C,2);D.__click=[ca,m],j(()=>S(q,v(b))),w(p,x)},ga=(p,x)=>{{var C=D=>{var M=hs(),B=f(i(M),6);na(B,{get href(){return va.ADD_FRIEND},className:"empty-action-button",children:(E,W)=>{var V=ts("–î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞");w(E,V)},$$slots:{default:!0}}),w(D,M)},q=D=>{var M=Ps();is(M,21,()=>v(n),B=>B.id,(B,E)=>{var W=Fs(),V=i(W),Q=i(V),Fa=i(Q),Pa=i(Fa),Ea=f(Q,2),X=i(Ea),ya=i(X),wa=f(X,2),$a=i(wa),Z=f(V,2),aa=i(Z),xa=f(i(aa),2),Da=i(xa),Sa=f(aa,2),ka=f(i(Sa),2),Aa=i(ka),Ta=f(Z,2),sa=i(Ta);sa.__click=[bs];var Na=f(sa,2);Na.__click=[ms,A,E],j((La,Ca,Ra,Ia)=>{S(Pa,La),S(ya,v(E).namePub),S($a,`ID: ${Ca??""}...`),S(Da,`${Ra??""}...`),S(Aa,Ia)},[()=>v(E).namePub.charAt(0).toUpperCase(),()=>v(E).id.slice(0,8),()=>v(E).myAccId.slice(0,8),()=>v(E).friendPubKeyLibp2p?v(E).friendPubKeyLibp2p.slice(0,16)+"...":"–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"]),w(B,W)}),w(D,M)};G(p,D=>{v(n).length===0?D(C):D(q,!1)},x)}};G(J,p=>{v(b)?p(ua):p(ga,!1)})}var _a=f(J,2);{var pa=p=>{var x=Es();fs(3,x,()=>gs,()=>({duration:300})),w(p,x)};G(_a,p=>{v(l)&&p(pa)})}var ha=f(L,2),ba=i(ha),ma=i(ba);j(()=>{N.disabled=v(l),S(U,v(l)?"‚ü≥":"üîÑ"),S(ma,`// FRIENDS_SYSTEM_v2.0 // STATUS: ${v(n).length??""} –î–†–£–ó–ï–ô // SVELTE5 //`)}),w(d,T)},$$slots:{default:!0}})},$$slots:{default:!0}}),j(()=>as(h,1,`theme-${_()??""}`,"svelte-1ug6f4v")),w(s,h),Xa(),o()}rs(["click"]);export{Ss as default};
