import{a9 as es,ae as Ms,af as Bs,ag as Os,ah as Us,ai as Ks,aj as js,ak as qs,al as zs,am as Vs,U as O,an as ts,ao as is,ap as Ws,aq as Ys,p as Gs,D as Y,$ as Hs,X as Xs,ar as Js,as as rs,E as y,A as v,f as k,c as i,x as q,a as w,j as Qs,k as Zs,s as sa,h as aa,d as f,L as ns,R as vs,C as G,y as S,M as ea,t as ta,u as ia,z as ra}from"./index-C2aHPuHm.js";import{a as os}from"./index-CLLWdXmW.js";import{B as na,C as va}from"./ContentSection-BF6-o_C9.js";const oa=()=>performance.now(),$={tick:a=>requestAnimationFrame(a),now:()=>oa(),tasks:new Set};function ds(){const a=$.now();$.tasks.forEach(s=>{s.c(a)||($.tasks.delete(s),s.f())}),$.tasks.size!==0&&$.tick(ds)}function la(a){let s;return $.tasks.size===0&&$.tick(ds),{promise:new Promise(t=>{$.tasks.add(s={c:a,f:t})}),abort(){$.tasks.delete(s)}}}function z(a,s){qs(()=>{a.dispatchEvent(new CustomEvent(s))})}function ca(a){if(a==="float")return"cssFloat";if(a==="offset")return"cssOffset";if(a.startsWith("--"))return a;const s=a.split("-");return s.length===1?s[0]:s[0]+s.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function ls(a){const s={},t=a.split(";");for(const o of t){const[_,n]=o.split(":");if(!_||n===void 0)break;const l=ca(_.trim());s[l]=n.trim()}return s}const da=a=>a;function fa(a,s,t,o){var _=(a&js)!==0,n="both",l,b=s.inert,P=s.style.overflow,u,c;function m(){var r=Ws,g=es;ts(null),is(null);try{return l??(l=t()(s,(o==null?void 0:o())??{},{direction:n}))}finally{ts(r),is(g)}}var A={is_global:_,in(){s.inert=b,z(s,"introstart"),u=H(s,m(),c,1,()=>{z(s,"introend"),u==null||u.abort(),u=l=void 0,s.style.overflow=P})},out(r){s.inert=!0,z(s,"outrostart"),c=H(s,m(),u,0,()=>{z(s,"outroend"),r==null||r()})},stop:()=>{u==null||u.abort(),c==null||c.abort()}},h=es;if((h.transitions??(h.transitions=[])).push(A),Ys){var F=_;if(!F){for(var e=h.parent;e&&(e.f&Ms)!==0;)for(;(e=e.parent)&&(e.f&Bs)===0;);F=!e||(e.f&Os)!==0}F&&Us(()=>{Ks(()=>A.in())})}}function H(a,s,t,o,_){var n=o===1;if(zs(s)){var l,b=!1;return Vs(()=>{if(!b){var r=s({direction:n?"in":"out"});l=H(a,r,t,o,_)}}),{abort:()=>{b=!0,l==null||l.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(t==null||t.deactivate(),!(s!=null&&s.duration))return _(),{abort:O,deactivate:O,reset:O,t:()=>o};const{delay:P=0,css:u,tick:c,easing:m=da}=s;var A=[];if(n&&t===void 0&&(c&&c(0,1),u)){var h=ls(u(0,1));A.push(h,h)}var F=()=>1-o,e=a.animate(A,{duration:P,fill:"forwards"});return e.onfinish=()=>{e.cancel();var r=(t==null?void 0:t.t())??1-o;t==null||t.abort();var g=o-r,d=s.duration*Math.abs(g),T=[];if(d>0){var R=!1;if(u)for(var I=Math.ceil(d/16.666666666666668),N=0;N<=I;N+=1){var U=r+g*m(N/I),K=ls(u(U,1-U));T.push(K),R||(R=K.overflow==="hidden")}R&&(a.style.overflow="hidden"),F=()=>{var L=e.currentTime;return r+g*m(L/d)},c&&la(()=>{if(e.playState!=="running")return!1;var L=F();return c(L,1-L),!0})}e=a.animate(T,{duration:d,fill:"forwards"}),e.onfinish=()=>{F=()=>o,c==null||c(o,1-o),_()}},{abort:()=>{e&&(e.cancel(),e.effect=null,e.onfinish=O)},deactivate:()=>{_=O},reset:()=>{o===0&&(c==null||c(1,0))},t:()=>F()}}const ua=a=>a;function ga(a,{delay:s=0,duration:t=400,easing:o=ua}={}){const _=+getComputedStyle(a).opacity;return{delay:s,duration:t,easing:o,css:n=>`opacity: ${n*_}`}}function cs(a,s){console.log("üîÑ FriendsPage: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞"),s()}var _a=k('<span class="button-icon svelte-1ug6f4v">üë•</span> <span class="button-text svelte-1ug6f4v">–î–û–ë–ê–í–ò–¢–¨ –î–†–£–ì–ê</span>',1),pa=k('<div class="error-state svelte-1ug6f4v"><div class="error-icon svelte-1ug6f4v">‚ö†</div> <span class="svelte-1ug6f4v"> </span> <button class="retry-button svelte-1ug6f4v">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É</button></div>'),ha=k('<div class="empty-state svelte-1ug6f4v"><div class="empty-icon svelte-1ug6f4v">üë•</div> <h3 class="svelte-1ug6f4v">–°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –ø—É—Å—Ç</h3> <p class="svelte-1ug6f4v">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –¥—Ä—É–≥–∞, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ</p> <!></div>'),ba=()=>{},ma=(a,s,t)=>s(v(t).id),Fa=k('<div class="friend-card svelte-1ug6f4v"><div class="friend-header svelte-1ug6f4v"><div class="friend-avatar svelte-1ug6f4v"><span class="avatar-text svelte-1ug6f4v"> </span></div> <div class="friend-info svelte-1ug6f4v"><h3 class="friend-name svelte-1ug6f4v"> </h3> <span class="friend-id svelte-1ug6f4v"> </span></div></div> <div class="friend-details svelte-1ug6f4v"><div class="detail-row svelte-1ug6f4v"><span class="detail-label svelte-1ug6f4v">–ê–∫–∫–∞—É–Ω—Ç:</span> <span class="detail-value svelte-1ug6f4v"> </span></div> <div class="detail-row svelte-1ug6f4v"><span class="detail-label svelte-1ug6f4v">P2P –ö–ª—é—á:</span> <span class="detail-value svelte-1ug6f4v"> </span></div></div> <div class="friend-actions svelte-1ug6f4v"><button class="action-btn chat svelte-1ug6f4v"><span class="btn-icon svelte-1ug6f4v">üí¨</span> <span class="btn-text svelte-1ug6f4v">–ß–∞—Ç</span></button> <button class="action-btn delete svelte-1ug6f4v"><span class="btn-icon svelte-1ug6f4v">üóë</span> <span class="btn-text svelte-1ug6f4v">–£–¥–∞–ª–∏—Ç—å</span></button></div></div>'),Pa=k('<div class="friends-grid svelte-1ug6f4v"></div>'),Ea=k('<div class="loading-overlay svelte-1ug6f4v"><div class="loading-content svelte-1ug6f4v"><div class="loading-animation svelte-1ug6f4v">‚ßó</div> <span class="svelte-1ug6f4v">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π...</span></div></div>'),ya=k('<div class="friends-container svelte-1ug6f4v" data-widget-name="FriendsPage"><div class="status-message svelte-1ug6f4v"><div class="status-indicator svelte-1ug6f4v"><span class="status-dot active svelte-1ug6f4v"></span> <span class="status-text svelte-1ug6f4v">OK - –°–ò–°–¢–ï–ú–ê –î–†–£–ó–ï–ô –ê–ö–¢–ò–í–ù–ê</span></div></div> <div class="action-buttons svelte-1ug6f4v"><!> <button class="action-button secondary svelte-1ug6f4v"><span class="button-icon svelte-1ug6f4v"> </span> <span class="button-text svelte-1ug6f4v">–û–ë–ù–û–í–ò–¢–¨</span></button></div> <div class="friends-list svelte-1ug6f4v"><h2 class="section-title svelte-1ug6f4v"><span class="title-icon svelte-1ug6f4v">üìã</span> –°–ü–ò–°–û–ö –î–†–£–ó–ï–ô</h2> <div class="content-container svelte-1ug6f4v"><!> <!></div></div> <div class="footer-status svelte-1ug6f4v"><span class="footer-info svelte-1ug6f4v"> </span></div></div>'),wa=k("<div><!></div>");function Sa(a,s){Gs(s,!0);const[t,o]=Zs(),_=()=>aa(ea,"$theme",t);let n=Y(Hs([])),l=Y(!0),b=Y(null),P=null;Xs(()=>(m(),u(),()=>{P&&(P.close(),P=null)}));function u(){try{P=new BroadcastChannel(Js.FRONT_MIDDLEWARE),P.addEventListener("message",c),console.log("üì° FriendsPage: Broadcast –∫–∞–Ω–∞–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω")}catch(e){console.error("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ broadcast –∫–∞–Ω–∞–ª–∞:",e)}}function c(e){const{action:r,data:g}=e.data;console.log("üì¢ FriendsPage: –ü–æ–ª—É—á–µ–Ω–æ broadcast —Å–æ–æ–±—â–µ–Ω–∏–µ:",r,g),r===rs.ADD_FRIENDS?(console.log("‚ûï FriendsPage: –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π —á–µ—Ä–µ–∑ broadcast –Ω–∞–ø—Ä—è–º—É—é"),g.list&&Array.isArray(g.list)?(y(n,g.list,!0),console.log(`üìä FriendsPage: –û–±–Ω–æ–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ broadcast: ${v(n).length} –¥—Ä—É–∑–µ–π`)):(console.log("‚ö†Ô∏è FriendsPage: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ broadcast, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —á–µ—Ä–µ–∑ API"),m())):r===rs.DELETE_FRIENDS&&(console.log("‚ûñ FriendsPage: –£–¥–∞–ª—è–µ–º –¥—Ä—É–∑–µ–π —á–µ—Ä–µ–∑ broadcast:",g.ids),y(n,v(n).filter(d=>!g.ids.includes(d.id)),!0))}async function m(){console.log("üîÑ FriendsPage: –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –¥—Ä—É–∑–µ–π..."),y(l,!0),y(b,null);const e=Date.now();try{console.log("üìû FriendsPage: –í—ã–∑—ã–≤–∞–µ–º api.friends.getList()...");const d=await os.friends.getList();console.log("‚úÖ FriendsPage: –ü–æ–ª—É—á–µ–Ω —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π:",d),y(n,d||[],!0),console.log(`üìä FriendsPage: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ä—É–∑–µ–π: ${v(n).length}`),v(n).length===0?console.log("üì≠ FriendsPage: –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –ø—É—Å—Ç"):console.log("üë• FriendsPage: –ò–º–µ–Ω–∞ –¥—Ä—É–∑–µ–π:",v(n).map(T=>T.namePub))}catch(d){console.error("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥—Ä—É–∑–µ–π:",d),y(b,`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π: ${(d==null?void 0:d.message)||String(d)}`)}const r=Date.now()-e,g=Math.max(0,1e3-r);setTimeout(()=>{y(l,!1),console.log("üèÅ FriendsPage: –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —á–µ—Ä–µ–∑",r+g,"ms")},g)}async function A(e){if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –¥—Ä—É–≥–∞?"))try{console.log("üóëÔ∏è FriendsPage: –£–¥–∞–ª—è–µ–º –¥—Ä—É–≥–∞ —Å ID:",e),await os.friends.delete([e]),y(n,v(n).filter(r=>r.id!==e),!0),console.log("‚úÖ FriendsPage: –î—Ä—É–≥ —É–¥–∞–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ")}catch(r){console.error("‚ùå FriendsPage: –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞:",r),y(b,"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞")}}var h=wa(),F=i(h);na(F,{title:"–î–†–£–ó–¨–Ø",subtitle:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º –¥—Ä—É–∑–µ–π",pageName:"FriendsPage",footerVersion:"// FRIENDS_SYSTEM_v2.0 //",footerStatus:"MODE: SVELTE5",children:r=>{va(r,{title:"–°–ò–°–¢–ï–ú–ê –î–†–£–ó–ï–ô",children:d=>{var T=ya(),R=f(i(T),2),I=i(R);ns(I,{get href(){return vs.ADD_FRIEND},className:"action-button primary",children:(p,x)=>{var C=_a();w(p,C)},$$slots:{default:!0}});var N=f(I,2);N.__click=[cs,m];var U=i(N),K=i(U),L=f(R,2),fs=f(i(L),2),X=i(fs);{var us=p=>{var x=pa(),C=f(i(x),2),V=i(C),D=f(C,2);D.__click=[cs,m],q(()=>S(V,v(b))),w(p,x)},gs=(p,x)=>{{var C=D=>{var M=ha(),B=f(i(M),6);ns(B,{get href(){return vs.ADD_FRIEND},className:"empty-action-button",children:(E,W)=>{var j=ta("–î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞");w(E,j)},$$slots:{default:!0}}),w(D,M)},V=D=>{var M=Pa();ia(M,21,()=>v(n),B=>B.id,(B,E)=>{var W=Fa(),j=i(W),J=i(j),Fs=i(J),Ps=i(Fs),Es=f(J,2),Q=i(Es),ys=i(Q),ws=f(Q,2),$s=i(ws),Z=f(j,2),ss=i(Z),xs=f(i(ss),2),Ds=i(xs),Ss=f(ss,2),ks=f(i(Ss),2),As=i(ks),Ts=f(Z,2),as=i(Ts);as.__click=[ba];var Ns=f(as,2);Ns.__click=[ma,A,E],q((Ls,Cs,Rs,Is)=>{S(Ps,Ls),S(ys,v(E).namePub),S($s,`ID: ${Cs??""}...`),S(Ds,`${Rs??""}...`),S(As,Is)},[()=>v(E).namePub.charAt(0).toUpperCase(),()=>v(E).id.slice(0,8),()=>v(E).myAccId.slice(0,8),()=>v(E).friendPubKeyLibp2p?v(E).friendPubKeyLibp2p.slice(0,16)+"...":"–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"]),w(B,W)}),w(D,M)};G(p,D=>{v(n).length===0?D(C):D(V,!1)},x)}};G(X,p=>{v(b)?p(us):p(gs,!1)})}var _s=f(X,2);{var ps=p=>{var x=Ea();fa(3,x,()=>ga,()=>({duration:300})),w(p,x)};G(_s,p=>{v(l)&&p(ps)})}var hs=f(L,2),bs=i(hs),ms=i(bs);q(()=>{N.disabled=v(l),S(K,v(l)?"‚ü≥":"üîÑ"),S(ms,`// FRIENDS_SYSTEM_v2.0 // STATUS: ${v(n).length??""} –î–†–£–ó–ï–ô // SVELTE5 //`)}),w(d,T)},$$slots:{default:!0}})},$$slots:{default:!0}}),q(()=>sa(h,1,`theme-${_()??""}`,"svelte-1ug6f4v")),w(a,h),Qs(),o()}ra(["click"]);export{Sa as default};
