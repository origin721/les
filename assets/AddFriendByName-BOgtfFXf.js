import{a as A,f as p,y as m,n as o,H as Z,a7 as $,v as N,d as g,G as S,z as _,Y as K,k as E,E as D,O as ee,L as ae,q as te,C as ne,l as t,p as U,e as V,U as W,g as w,I as re,V as F,ax as se,i as oe,u as ie,m as Y,s as j,j as v,ay as ce,R as de}from"./index-CaM9Q79c.js";import{B as le}from"./BasePage-CAd6ka2o.js";import{C as ue}from"./ContentSection-BH74mxtJ.js";import{I as ve}from"./Input-D6KX8GtI.js";import{s as me}from"./index-BrHldVPt.js";var fe=p('<div><div class="form-card-header svelte-oujg8g"><div class="form-card-icon svelte-oujg8g"> </div> <h3 class="form-card-title svelte-oujg8g"> </h3></div> <div class="form-card-content svelte-oujg8g"><!></div></div>');function ge(f,a){let s=A(a,"icon",3,"üìù"),c=A(a,"className",3,"");var i=fe(),e=o(i),n=o(e),d=o(n),u=m(n,2),l=o(u),x=m(e,2),b=o(x);Z(b,()=>a.children??$),N(()=>{S(i,1,`form-card ${c()??""}`,"svelte-oujg8g"),_(d,s()),_(l,a.title)}),g(f,i)}var _e=p('<div><span class="message-icon svelte-128kjhp"> </span> <span class="message-text"> </span></div>');function he(f,a){var s=K(),c=E(s);{var i=e=>{var n=_e(),d=o(n),u=o(d),l=m(d,2),x=o(l);N(()=>{S(n,1,`form-message form-message-${a.type??""}`,"svelte-128kjhp"),_(u,a.type==="success"?"‚úÖ":"‚ùå"),_(x,a.message)}),g(e,n)};D(c,e=>{a.message&&a.type&&e(i)})}g(f,s)}var ye=p("<span> </span>"),xe=p('<span class="button-icon svelte-1o9kqx5"> </span> <span> </span>',1),pe=p('<span class="button-icon svelte-1o9kqx5"> </span> <span> </span>',1),be=p('<div class="form-actions svelte-1o9kqx5"><!> <!></div>');function Ie(f,a){let s=A(a,"primaryLoadingText",3,"–ó–ê–ì–†–£–ó–ö–ê..."),c=A(a,"primaryIcon",3,"‚úì"),i=A(a,"secondaryIcon",3,"‚¨ÖÔ∏è");var e=be(),n=o(e);ee(n,{variant:"primary",size:"lg",get onclick(){return a.onPrimaryClick},get disabled(){return a.disabled},get loading(){return a.loading},children:x=>{var b=K(),I=E(b);{var k=h=>{var r=ye(),y=o(r);N(()=>_(y,s())),g(h,r)},T=h=>{var r=xe(),y=E(r),q=o(y),P=m(y,2),C=o(P);N(()=>{_(q,c()),_(C,a.primaryText)}),g(h,r)};D(I,h=>{a.loading?h(k):h(T,!1)})}g(x,b)},$$slots:{default:!0}});var d=m(n,2);{var u=l=>{ae(l,{get href(){return a.secondaryHref},className:"action-button secondary",children:(x,b)=>{var I=pe(),k=E(I),T=o(k),h=m(k,2),r=o(h);N(()=>{_(T,i()),_(r,a.secondaryText)}),g(x,I)},$$slots:{default:!0}})};D(d,l=>{a.secondaryText&&a.secondaryHref&&l(u)})}g(f,e)}var Ae=p('<div class="info-item svelte-1jfr4hu"><span class="info-icon svelte-1jfr4hu"> </span> <span class="info-text"> </span></div>'),ke=p('<div class="form-info svelte-1jfr4hu"></div>');function Ne(f,a){var s=ke();te(s,21,()=>a.items,ne,(c,i)=>{var e=Ae(),n=o(e),d=o(n),u=m(n,2),l=o(u);N(()=>{_(d,t(i).icon),_(l,t(i).text)}),g(c,e)}),g(f,s)}var Te=p('<div><label><span class="label-icon svelte-1ujcuof"> </span> <span class="label-text svelte-1ujcuof"> </span></label> <!></div>');function z(f,a){U(a,!0);let s=A(a,"icon",3,"üìù"),c=A(a,"placeholder",3,""),i=A(a,"required",3,!1),e=A(a,"disabled",3,!1);function n(T){const h=T.target;a.onchange&&a.onchange(h.value)}var d=Te(),u=o(d),l=o(u),x=o(l),b=m(l,2),I=o(b),k=m(u,2);ve(k,{get id(){return a.id},get value(){return a.value},onchange:n,get onkeydown(){return a.onkeydown},get placeholder(){return c()},get disabled(){return e()}}),N(()=>{S(d,1,W(w.group),"svelte-1ujcuof"),re(u,"for",a.id),S(u,1,`${w.label} ${i()?w.labelRequired:""}`,"svelte-1ujcuof"),_(x,s()),_(I,a.label)}),g(f,d),V()}async function Fe(f,a){const{friendName:s,selectedAccountId:c}=f;if(!s.trim())return{success:!1,message:"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –¥—Ä—É–≥–∞",messageType:"error"};if(!c)return{success:!1,message:"–í—ã–±–µ—Ä–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç",messageType:"error"};const i=new Promise((e,n)=>{setTimeout(()=>n(new Error("Timeout: –æ–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–≤—ã—Å–∏–ª–∞ 10 —Å–µ–∫—É–Ω–¥")),1e4)});try{F("üîÑ –ù–∞—á–∏–Ω–∞–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∞...");const e=a.find(d=>d.id===c);F("üë§ –í—ã–±—Ä–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç:",e),e&&F("üîÑ –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é..."),F("üîÑ –î–æ–±–∞–≤–ª—è–µ–º –¥—Ä—É–≥–∞ —á–µ—Ä–µ–∑ API...");const n={namePub:s.trim(),myAccId:c,explicitMyAccId:c,friendPubKeyLibp2p:""};return F("üìù –î–∞–Ω–Ω—ã–µ –¥—Ä—É–≥–∞:",n),await Promise.race([me.friends.add({friends:[n],myAccId:c}),i]),F("‚úÖ –î—Ä—É–≥ –¥–æ–±–∞–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ"),{success:!0,message:`–î—Ä—É–≥ "${s}" –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤`,messageType:"success"}}catch(e){return console.error("‚ùå –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–∞:",e),console.error("‚ùå –ü–æ–ª–Ω–∞—è –æ—à–∏–±–∫–∞:",{message:e==null?void 0:e.message,stack:e==null?void 0:e.stack,name:e==null?void 0:e.name,error:e}),{success:!1,message:`–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞: ${(e==null?void 0:e.message)||String(e)}`,messageType:"error"}}}const je="_formContainer_1583c_3",Ce={formContainer:je};var Ee=p("<!> <!> <!> <!> <!> <!>",1),Se=p("<div><!></div>");function Me(f,a){U(a,!0);let s=j(""),c=j(""),i=j(""),e=j(!1),n=j(""),d=j("");const u=se(oe),l=Y(()=>{var r;return Object.values(((r=u.state)==null?void 0:r.byId)||{})});ie(()=>{t(l).length>0&&!t(i)&&v(i,t(l)[0].id,!0)});const x=[{icon:"üí°",text:"–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—ã —Å–º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞—â–∏—â–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"},{icon:"üîí",text:"–î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Å–≤—è–∑–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±–º–µ–Ω –∫–ª—é—á–∞–º–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è"}];async function b(){if(console.log("üîò handleAddFriend –≤—ã–∑–≤–∞–Ω",{loading:t(e),friendName:t(s).trim(),selectedAccountId:t(i)}),t(e)){console.log("‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–æ - –∏–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞");return}v(e,!0),v(n,""),v(d,"");const r={friendName:t(s).trim(),friendNickname:t(c).trim(),selectedAccountId:t(i)};console.log("üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ:",r);try{const y=await Fe(r,t(l));v(n,y.message,!0),v(d,y.messageType,!0),y.success&&(v(s,""),v(c,""))}catch(y){console.error("‚ùå Error in handleAddFriend:",y),v(n,"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞"),v(d,"error")}finally{v(e,!1)}}function I(r){r.key==="Enter"&&!t(e)&&t(s).trim()&&(r.preventDefault(),b())}function k(r){v(i,r,!0)}function T(r){v(s,r,!0)}function h(r){v(c,r,!0)}le(f,{title:"ADD_FRIEND_BY_NAME",subtitle:"–î–û–ë–ê–í–ò–¢–¨_–î–†–£–ì–ê",pageName:"AddFriendByNamePage",footerVersion:"// ADD_FRIEND_BY_NAME_v0.1.0 //",footerStatus:"MODE: SIMPLE",children:y=>{ue(y,{title:"// –î–û–ë–ê–í–ò–¢–¨ –î–†–£–ì–ê //",description:"–ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è",children:P=>{var C=Se(),G=o(C);ge(G,{icon:"üë§",title:"–ù–û–í–´–ô –ö–û–ù–¢–ê–ö–¢",children:J=>{var L=Ee(),B=E(L);ce(B,{get accounts(){return t(l)},get selectedAccountId(){return t(i)},get loading(){return t(e)},onchange:k});var M=m(B,2);z(M,{id:"friend-name",label:"–ò–ú–Ø –î–†–£–ì–ê",icon:"üìù",get value(){return t(s)},placeholder:"–í–≤–µ–¥–∏—Ç–µ –∏–º—è...",required:!0,get disabled(){return t(e)},onchange:T,onkeydown:I});var R=m(M,2);z(R,{id:"friend-nickname",label:"–ù–ò–ö–ù–ï–ô–ú (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)",icon:"üè∑Ô∏è",get value(){return t(c)},placeholder:"–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è...",get disabled(){return t(e)},onchange:h,onkeydown:I});var H=m(R,2);he(H,{get message(){return t(n)},get type(){return t(d)}});var O=m(H,2);{let X=Y(()=>"#"+de.FRIENDS);Ie(O,{primaryText:"–î–û–ë–ê–í–ò–¢–¨ –î–†–£–ì–ê",primaryLoadingText:"–î–û–ë–ê–í–õ–ï–ù–ò–ï...",primaryIcon:"‚ûï",secondaryText:"–ù–ê–ó–ê–î",secondaryIcon:"‚¨ÖÔ∏è",get secondaryHref(){return t(X)},get loading(){return t(e)},get disabled(){return t(e)},onPrimaryClick:b})}var Q=m(O,2);Ne(Q,{get items(){return x}}),g(J,L)},$$slots:{default:!0}}),N(()=>S(C,1,W(Ce.formContainer))),g(P,C)},$$slots:{default:!0}})},$$slots:{default:!0}}),V()}export{Me as default};
