# üÜò Troubleshooting Guide

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ—à–µ–Ω–∏—é —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º –≤ **les.scripton.app**

---

## üéØ –ë—ã—Å—Ç—Ä—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
```bash
# 1. –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞
Ctrl+Shift+R (Chrome/Firefox)

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
F12 ‚Üí Console ‚Üí –∏—â–∏—Ç–µ –æ—à–∏–±–∫–∏

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ
Ctrl+Shift+N (Chrome) / Ctrl+Shift+P (Firefox)
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö "–∑–∞–≤–∏—Å–ª–∞"
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
localStorage.clear()
location.reload()

# –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ:
# 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Application ‚Üí Storage
# 2. –£–¥–∞–ª–∏—Ç–µ IndexedDB ‚Üí main_les_store_v1
# 3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
```

### –û—à–∏–±–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–π
```bash
# –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (/settings):
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π"
# 2. –ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–∏—Å–ª–∞ >10 –º–∏–Ω—É—Ç - –æ–Ω–∞ —Å–±—Ä–æ—Å–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
# 3. –ü—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ "–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π —Å–±—Ä–æ—Å –ë–î"
```

---

## üîß –ü—Ä–æ–±–ª–µ–º—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### Frontend (Svelte)

#### ‚ùå –û—à–∏–±–∫–∞: `npm run dev` –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –†–µ—à–µ–Ω–∏–µ:
rm -rf node_modules package-lock.json
npm install
npm run dev

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:
npm run build && npm run preview
```

#### ‚ùå CSS —Å—Ç–∏–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
```bash
# –ü—Ä–æ–±–ª–µ–º–∞: CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –±–µ–∑ fallback
# –†–µ—à–µ–Ω–∏–µ –≤ CSS —Ñ–∞–π–ª–µ:
background-color: var(--les-bg-primary, #0a0a0a);
# –ù–ï:
background-color: var(--background-color);
```

#### ‚ùå Svelte –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à Vite:
rm -rf .vite
npm run dev
```

### IndexedDB Issues

#### ‚ùå –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
```javascript
// –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
await indexedDB.databases()
// –î–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å main_les_store_v1

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
import { getDbState } from './src/indexdb/db_state_manager_v1/db_state_manager'
console.log(await getDbState('main_les_store_v1'))
```

#### ‚ùå –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫:
// 1. –û—Ç–∫—Ä–æ–π—Ç–µ /settings
// 2. –ù–∞–π–¥–∏—Ç–µ "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π"
// 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–∏–≥—Ä–∞—Ü–∏–∏

// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–±—Ä–æ—Å (–û–°–¢–û–†–û–ñ–ù–û - –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö):
localStorage.removeItem('db_state_main_les_store_v1')
indexedDB.deleteDatabase('main_les_store_v1')
location.reload()
```

#### ‚ùå –û—à–∏–±–∫–∞: "Version constraint not satisfied"
```bash
# –ü—Ä–∏—á–∏–Ω–∞: –†–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–µ—Ä—Å–∏–π
# –†–µ—à–µ–Ω–∏–µ:
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ACCOUNTS_VERSION –≤ constants.ts
# 2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–∏–ª–∏—Å—å
# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
```

### –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è

#### ‚ùå –û—à–∏–±–∫–∞: "crypto.subtle is undefined"
```bash
# –ü—Ä–∏—á–∏–Ω–∞: HTTPS —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è Web Crypto API
# –†–µ—à–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
# 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ localhost (–Ω–µ 127.0.0.1)
# 2. –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS –≤ vite.config.ts:
server: {
  https: true
}
```

#### ‚ùå –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç —Å –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π
```bash
# –ò–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ - –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Vitest
# –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
# 1. –¢–µ—Å—Ç—ã –æ—Ç–∫–ª—é—á–µ–Ω—ã –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
# 2. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —á–µ—Ä–µ–∑ /settings
# 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```

---

## üê≥ Docker –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –û—á–∏—Å—Ç–∫–∞ Docker:
docker-compose down
docker system prune -f
docker-compose up --build

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:
docker-compose logs -f
```

### ‚ùå –ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–Ω—è—Ç—ã–µ –ø–æ—Ä—Ç—ã:
lsof -i :5173  # Frontend
lsof -i :3000  # Event-stream
lsof -i :8080  # Backend

# –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç—ã –≤ docker-compose.yml
```

---

## üåê Network Issues

### ‚ùå P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ WebRTC:
# 1. –û—Ç–∫—Ä–æ–π—Ç–µ chrome://webrtc-internals/
# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ peer connections
# 3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ñ–∞–π—Ä–≤–æ–ª–æ–º
```

### ‚ùå Event Stream –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSE:
# 1. Network tab –≤ DevTools
# 2. –ò—â–∏—Ç–µ /events endpoint
# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ event-stream —Å–µ—Ä–≤–µ—Ä–∞:
cd event-stream
npm restart
```

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

#### –í –±—Ä–∞—É–∑–µ—Ä–µ:
```javascript
// –î–æ–±–∞–≤—å—Ç–µ –∫ URL: ?debug=true
// –ò–ª–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:
localStorage.setItem('debug', 'true')
location.reload()

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã:
console.log('IndexedDB:', await indexedDB.databases())
console.log('LocalStorage:', { ...localStorage })
console.log('Crypto available:', !!window.crypto.subtle)
```

#### –≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
copy(JSON.stringify({
  userAgent: navigator.userAgent,
  timestamp: new Date().toISOString(),
  localStorage: { ...localStorage },
  indexedDB: await indexedDB.databases(),
  errors: window.errors || []
}, null, 2))
```

### –°–∏—Å—Ç–µ–º–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
# –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (/settings):
# 1. ‚è±Ô∏è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π - –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
# 2. üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ - —Å–ø–∏—Å–æ–∫ –∞–∫–∫–∞—É–Ω—Ç–æ–≤  
# 3. üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Friends - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥—Ä—É–∑–µ–π
# 4. üè† –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Rooms - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–Ω–∞—Ç
```

---

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞
```bash
# –í–ù–ò–ú–ê–ù–ò–ï: –ü–æ–ª–Ω–∞—è –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö!
# –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:

# 1. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ):
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

# 2. –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å:
localStorage.clear()
indexedDB.deleteDatabase('main_les_store_v1')
indexedDB.deleteDatabase('db_state_manager_v1')
location.reload()

# 3. –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö:
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫:
‚ñ° –ë—Ä–∞—É–∑–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç IndexedDB?
‚ñ° –í–∫–ª—é—á–µ–Ω—ã –ª–∏ cookies –∏ localStorage?
‚ñ° –ù–µ—Ç –ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ JavaScript?
‚ñ° –î–æ—Å—Ç—É–ø–µ–Ω –ª–∏ crypto.subtle? (–Ω—É–∂–µ–Ω HTTPS)
‚ñ° –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ª–∏ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å/—Ñ–∞–π—Ä–≤–æ–ª?

# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
‚ñ° Chrome 90+, Firefox 88+, Safari 14+
‚ñ° HTTPS –∏–ª–∏ localhost
‚ñ° –í–∫–ª—é—á–µ–Ω–Ω—ã–π JavaScript
‚ñ° –ú–∏–Ω–∏–º—É–º 50MB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
```

---

## üìû –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

### –°–æ–æ–±—â–∏—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ:
1. **GitHub Issues**: [–°–æ–∑–¥–∞—Ç—å issue](https://github.com/origin721/les/issues)
2. **–ü—Ä–∏–ª–æ–∂–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É**: –ö–æ–¥ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤"
3. **–û–ø–∏—à–∏—Ç–µ —à–∞–≥–∏**: –ö–∞–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É

### –ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º issue:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ –ª–∏ —Ä–µ—à–µ–Ω–∏—è –≤—ã—à–µ?
- ‚úÖ –ü–æ–ø—Ä–æ–±–æ–≤–∞–ª–∏ –ª–∏ –≤ –¥—Ä—É–≥–æ–º –±—Ä–∞—É–∑–µ—Ä–µ?
- ‚úÖ –û—á–∏—Å—Ç–∏–ª–∏ –ª–∏ –∫–µ—à?
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ –ª–∏ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏?

### –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–µ:
```markdown
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ
**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ**: –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏  
**–®–∞–≥–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è**: 
1. –û—Ç–∫—Ä–æ–π—Ç–µ...
2. –ù–∞–∂–º–∏—Ç–µ...
3. –û—à–∏–±–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è...

**–ë—Ä–∞—É–∑–µ—Ä**: Chrome 120.0.0.0
**–û–°**: Windows 11
**URL**: https://origin721.github.io/les/settings
**–ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏**: [–ø—Ä–∏–ª–æ–∂–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç]
**–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ**: [JSON –∏–∑ "–≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤"]
```

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- **[üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](architecture.md)** - –ö–∞–∫ –≤—Å–µ —É—Å—Ç—Ä–æ–µ–Ω–æ
- **[üóÑÔ∏è IndexedDB Guide](../front/docs/indexdb/README.md)** - –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **[üîß Development Guide](../front/README.md)** - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- **[üê≥ Docker Setup](../docker/README.md)** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

---

*–û–±–Ω–æ–≤–ª–µ–Ω–æ: —è–Ω–≤–∞—Ä—å 2025 | –ï—Å–ª–∏ –≤–∞—à–∞ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞ - —Å–æ–∑–¥–∞–π—Ç–µ issue!*