# Broadcast Channel - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∞–º–∏

–°–∏—Å—Ç–µ–º–∞ –º–µ–∂–≤–∫–ª–∞–¥–æ—á–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ BroadcastChannel API –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π –º–µ–∂–¥—É –≤—Å–µ–º–∏ –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

**1. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
- `CHANNEL_NAMES.ts` - –Ω–∞–∑–≤–∞–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤
- `FRONT_MIDDLEWARE_ACTIONS.ts` - –¥–µ–π—Å—Ç–≤–∏—è middleware

**2. –¢–∏–ø—ã:**
- `front_middleware_channel.ts` - TypeScript —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π

**3. –£—Ç–∏–ª–∏—Ç—ã:**
- `tab_management.ts` - –∫–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∫–ª–∞–¥–∫–∞–º–∏

**4. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:**
- `src/processes/broadcast_middleware/broadcast_middleware.ts` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–∫—Ä—ã—Ç–∏–µ –≤–∫–ª–∞–¥–æ–∫

```typescript
import { TabManagement } from '../../../core/broadcast_channel/tab_management';

// –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ (–∫—Ä–æ–º–µ —Ç–µ–∫—É—â–µ–π)
TabManagement.closeAllOtherTabs();

// –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏ –≤–∫–ª—é—á–∞—è —Ç–µ–∫—É—â—É—é
TabManagement.closeAllTabsIncludingCurrent();

// –ö–∞—Å—Ç–æ–º–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
TabManagement.closeAllTabs(false, 'custom_reason');
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

**1. –î–æ–±–∞–≤–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –≤ `FRONT_MIDDLEWARE_ACTIONS.ts`:**
```typescript
NEW_ACTION: 'NEW_ACTION'
```

**2. –°–æ–∑–¥–∞—Ç—å —Ç–∏–ø –≤ `front_middleware_channel.ts`:**
```typescript
export type PostMessageParamNewAction = {
  action: typeof FrontMiddlewareActions['NEW_ACTION'],
  data: {
    // –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ
  },
}
```

**3. –î–æ–±–∞–≤–∏—Ç—å –≤ union type `PostMessageParam`**

**4. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤ `broadcast_middleware.ts`:**
```typescript
if (param.action === FrontMiddlewareActions.NEW_ACTION) {
  // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
}
```

## üì° –¢–µ–∫—É—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

- `ADD_ACCOUNTS` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- `DELETE_ACCOUNTS` - —É–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤  
- `ADD_FRIENDS` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–∑–µ–π
- `DELETE_FRIENDS` - —É–¥–∞–ª–µ–Ω–∏–µ –¥—Ä—É–∑–µ–π
- `ADD_ROOMS` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç
- `DELETE_ROOMS` - —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç
- `CLOSE_ALL_TABS` - **–ù–û–í–û–ï** - –∑–∞–∫—Ä—ã—Ç–∏–µ –≤–∫–ª–∞–¥–æ–∫

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ `src/processes/app_processes_mount.ts`:

```typescript
broadcast_middleware(); // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
```

## üí° –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
- ‚úÖ –†–∞—Å—à–∏—Ä—è–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∞–º–∏
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

## üéØ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∞–º–∏**:

- **"–ó–∞–∫—Ä—ã—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏"** - –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –∫—Ä–æ–º–µ —Ç–µ–∫—É—â–µ–π
- **"–ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏"** - –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≤–∫–ª—é—á–∞—è —Ç–µ–∫—É—â—É—é

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Ç—Ä–µ–±—É—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `confirm()`.
